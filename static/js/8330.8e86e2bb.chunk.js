/*! For license information please see 8330.8e86e2bb.chunk.js.LICENSE.txt */
(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8330],{2958:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="https://356f-49-36-66-75.ngrok-free.app"},8330:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var o=n(2791),s=n(5294),a=n(2937),r=n(1276),i=n.n(r),l=n(2958),c=n(2062),h=n.n(c),u=n(184);const d=()=>{const[t,e]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[c,d]=(0,o.useState)([]),[p,f]=(0,o.useState)(""),[v,_]=(0,o.useState)(""),[m,g]=(0,o.useState)(""),[x,y]=(0,o.useState)(""),[b,w]=(0,o.useState)(""),[j,C]=(0,o.useState)(""),[P,k]=(0,o.useState)([]),[S,D]=(0,o.useState)("Select Branch"),[E,M]=(0,o.useState)("Select Semester"),L=()=>{console.log("helo"),h()({title:"SMARTROLL REGISTRATION",text:"You've already been registered",icon:"success",button:"OK"})},[O,T]=(0,o.useState)({steps:{1:!1,2:!1,3:!1,4:!1,5:!1}}),[F,R]=(0,o.useState)(!1),W=(0,o.useRef)(),[N,z]=(0,o.useState)(1);return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(a.xH,{children:[(0,u.jsx)(a.bn,{children:"Student Details"}),(0,u.jsxs)(a.sl,{children:[(0,u.jsx)(a.bn,{children:"Step 1:"}),(0,u.jsx)(a.lx,{children:(0,u.jsxs)(a.lx,{className:"row g-3 needs-validation",noValidate:!0,children:[N>=1?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.b7,{md:12,children:[(0,u.jsx)(a.L8,{htmlFor:"validationCustom02",children:"Student Enrollment:"}),(0,u.jsx)(a.jO,{type:"number",id:"validationCustom02",onChange:t=>{console.log(t.target.value),g(t.target.value)},disabled:O.steps[1]}),(0,u.jsx)(a.CO,{valid:!0,children:"Looks good!"})]}),(0,u.jsx)(a.b7,{xs:12,children:(0,u.jsx)("button",{className:"btn btn-outline-dark form-control ".concat(O.steps[1]||N[1]?"d-none":""),onClick:t=>{(t=>{if(t.preventDefault(),""==m)alert("Please enter the enrollement");else{const t={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},n={enrollment:m};s.Z.post("".concat(l.Z,"/auth/api/set_student_creds_1"),n,{headers:t}).then((t=>{z(t.data.steps);let n=t.data.steps,o=O.steps;for(let e=1;e<=n;e++)o[e]=!0;T((t=>({...t,steps:o}))),console.log(O),2==n?(e(t.data.branches),z(n)):3==n?(z(n),console.log(t.data.branch.branch_name),D(t.data.branch.branch_name),r(t.data.semesters)):4==n||5==n?(z(n),D(t.data.branch.branch_name),M(t.data.semester.no),d(t.data.subjects)):6==n&&(z(n),D(t.data.branch.branch_name),M(t.data.semester.no),d(t.data.subjects),R("".concat(l.Z).concat(t.data.signature)),L()),y(t.data.student_slug)})).catch((t=>{401===t.response.status&&alert(t.response.data),500===t.response.status&&alert(t.response.data.data)}))}})(t)},children:"Set"})})]}):null,(0,u.jsx)(a.bn,{children:"Step 2:"}),N>=2?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.b7,{md:12,children:[(0,u.jsx)(a.L8,{htmlFor:"validationCustom02",children:"Select Branch"}),(0,u.jsxs)(a.LX,{autoComplete:"off",id:"classroom_select",onChange:t=>{(t=>{console.log(t),w(t)})(t.target.value)},disabled:O.steps[3],children:[(0,u.jsx)("option",{value:"",children:S}),t.length>0?t.map(((t,e)=>(0,u.jsx)("option",{value:t.slug,children:t.branch_name},e))):null]})]}),(0,u.jsx)(a.b7,{xs:12,children:(0,u.jsx)("button",{className:"btn btn-outline-dark form-control ".concat(O.steps[3]||N[3]?"d-none":""),onClick:t=>{(t=>{t.preventDefault();const e={student_slug:x,branch_slug:b};s.Z.post("".concat(l.Z,"/auth/api/set_student_creds_2"),e,{headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}).then((t=>{console.log(t.data),z(t.data.steps);let e=t.data.steps,n=O.steps;for(let o=1;o<=e;o++)n[o]=!0;T((t=>({...t,steps:n}))),r(t.data.semesters)})).catch((t=>{console.log(t),401===t.response.status&&alert(t.response.error),500===t.response.status&&(console.log(t),alert(t.response.data.data))}))})(t)},children:"Set"})})]})}):null,(0,u.jsx)(a.bn,{children:"Step 3:"}),N>=3?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.b7,{md:12,children:[(0,u.jsx)(a.L8,{htmlFor:"validationCustom01",children:"Select Semester"}),(0,u.jsxs)(a.LX,{autoComplete:"off",id:"subject_select","aria-label":"Default select example",onChange:t=>{(t=>{console.log(t),C(t)})(t.target.value)},disabled:O.steps[4],children:[(0,u.jsx)("option",{value:"",children:E}),n.length>0?n.map(((t,e)=>(0,u.jsxs)("option",{value:t.slug,children:["Semester - ",t.no]},e))):null]})]}),(0,u.jsx)(a.b7,{xs:12,children:(0,u.jsx)("button",{className:"btn btn-outline-dark form-control ".concat(O.steps[4]||N[4]?"d-none":""),onClick:t=>{(t=>{t.preventDefault();const e={student_slug:x,semester_slug:j};s.Z.post("".concat(l.Z,"/auth/api/set_student_creds_3"),e,{headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}).then((t=>{console.log(t.data),d(t.data.subjects),z(t.data.steps);let e=t.data.steps,n=O.steps;for(let o=1;o<=e;o++)n[o]=!0;T((t=>({...t,steps:n})))})).catch((t=>{401===t.response.status&&alert(t.response.data),500===t.response.status&&alert(t.response.data.data)}))})(t)},children:"Set"})})]}):null,(0,u.jsx)(a.bn,{children:"Step 4:"}),N>=4?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.b7,{md:12,children:[(0,u.jsx)(a.L8,{htmlFor:"validationCustom01",children:"Select Subject"}),(0,u.jsx)(a.LX,{multiple:!0,autoComplete:"off",id:"subject_select","aria-label":"Default select example",onChange:t=>{const e=Array.from(t.target.selectedOptions,(t=>t.value)).filter((t=>""!==t));e.length>0?k(e):k([])},disabled:O.steps[5],children:c.length>0?c.map(((t,e)=>(0,u.jsx)("option",{value:t.slug,...t?"selected":"",children:t.subject_name},e))):null})]}),(0,u.jsx)(a.b7,{xs:12,children:(0,u.jsx)("button",{className:"btn btn-outline-dark form-control ".concat(O.steps[5]||N[5]?"d-none":""),onClick:t=>{(t=>{if(t.preventDefault(),P.length<=0)return;console.log(x);const e={student_slug:x,subject_arr:P};s.Z.post("".concat(l.Z,"/auth/api/set_student_creds_4"),e,{headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}).then((t=>{z(t.data.steps);let e=t.data.steps,n=O.steps;for(let o=1;o<=e;o++)n[o]=!0;T((t=>({...t,steps:n})))})).catch((t=>{401===t.response.status&&alert(t.response.data),500===t.response.status&&alert(t.response.data.data)}))})(t)},children:"Set"})})]}):null,(0,u.jsx)(a.bn,{children:"Step 5:"}),N>=5?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.b7,{md:12,children:[(0,u.jsx)(a.L8,{htmlFor:"validationCustom02",style:{display:"block"},children:"Signature"}),(0,u.jsx)("button",{onClick:t=>(t=>{t.preventDefault(),W.current.clear()})(t),className:"btn btn-outline-dark form-control mb-2 ".concat(O.steps[6]||N[6]?"d-none":""),children:"Clear"}),O.steps[6]&&F?(0,u.jsx)("img",{style:{width:"100%",height:"auto"},src:F}):(0,u.jsx)(i(),{ref:W,penColor:"green",canvasProps:{className:"sigCanvas w-100 border border-2 border-success"},className:"text-center"})]}),(0,u.jsxs)(a.b7,{md:12,className:"".concat(O.steps[6]||N[6]?"d-none":""),children:[(0,u.jsx)(a.L8,{htmlFor:"validationCustom02",children:"Password"}),(0,u.jsx)(a.jO,{type:"password",id:"validationCustom02",onChange:t=>{f(t.target.value)}}),(0,u.jsx)(a.CO,{valid:!0,children:"Looks good!"})]}),(0,u.jsxs)(a.b7,{md:12,className:"".concat(O.steps[6]||N[6]?"d-none":""),children:[(0,u.jsx)(a.L8,{htmlFor:"validationCustom02",children:"Confirm Password"}),(0,u.jsx)(a.jO,{type:"password",id:"validationCustom02",onChange:t=>{_(t.target.value)}}),(0,u.jsx)(a.CO,{valid:!0,children:"Looks good!"})]}),(0,u.jsx)(a.b7,{xs:12,children:(0,u.jsx)("button",{className:"btn btn-outline-dark form-control mb ".concat(O.steps[6]||N[6]?"d-none":""),onClick:t=>(t=>{t.preventDefault(),""!=p&&""!=v&&p===v||alert("Please provide a valid password");let e=W.current.toDataURL();const n={student_slug:x,signatureb64:e,password:p};s.Z.post("".concat(l.Z,"/auth/api/set_student_creds_5"),n,{headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}).then((t=>{if(z(t.data.steps),6==t.data.steps){z(t.data.steps);let e=t.data.steps,n=O.steps;for(let t=1;t<=e;t++)n[t]=!0;T((t=>({...t,steps:n}))),R("".concat(l.Z).concat(t.data.signature)),L()}})).catch((t=>{401===t.response.status&&alert(t.response.data),500===t.response.status&&alert(t.response.data.data)}))})(t),children:"Set"})})]}):null]})})]})]})})}},1276:function(t,e,n){var o,s,a,r;t.exports=(o=n(2007),s=n(2791),a=n(354),r=n(9590),function(t){function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=o(n(1)),u=n(2),d=o(u),p=o(n(3)),f=o(n(4)),v=function(t){function e(){var t,n,o;a(this,e);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return n=o=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),o._sigPad=null,o._excludeOurProps=function(){var t=o.props;return t.canvasProps,t.clearOnResize,s(t,["canvasProps","clearOnResize"])},o.getCanvas=function(){return o._canvas},o.getTrimmedCanvas=function(){var t=document.createElement("canvas");return t.width=o._canvas.width,t.height=o._canvas.height,t.getContext("2d").drawImage(o._canvas,0,0),(0,f.default)(t)},o.getSignaturePad=function(){return o._sigPad},o._checkClearOnResize=function(){o.props.clearOnResize&&o._resizeCanvas()},o._resizeCanvas=function(){var t=o.props.canvasProps||{},e=t.width,n=t.height;if(!e||!n){var s=o._canvas,a=Math.max(window.devicePixelRatio||1,1);e||(s.width=s.offsetWidth*a),n||(s.height=s.offsetHeight*a),s.getContext("2d").scale(a,a),o.clear()}},o.on=function(){return window.addEventListener("resize",o._checkClearOnResize),o._sigPad.on()},o.off=function(){return window.removeEventListener("resize",o._checkClearOnResize),o._sigPad.off()},o.clear=function(){return o._sigPad.clear()},o.isEmpty=function(){return o._sigPad.isEmpty()},o.fromDataURL=function(t,e){return o._sigPad.fromDataURL(t,e)},o.toDataURL=function(t,e){return o._sigPad.toDataURL(t,e)},o.fromData=function(t){return o._sigPad.fromData(t)},o.toData=function(){return o._sigPad.toData()},r(o,n)}return i(e,t),c(e,[{key:"componentDidMount",value:function(){this._sigPad=new p.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var t=this,e=this.props.canvasProps;return d.default.createElement("canvas",l({ref:function(e){t._canvas=e}},e))}}]),e}(u.Component);v.propTypes={velocityFilterWeight:h.default.number,minWidth:h.default.number,maxWidth:h.default.number,minDistance:h.default.number,dotSize:h.default.oneOfType([h.default.number,h.default.func]),penColor:h.default.string,throttle:h.default.number,onEnd:h.default.func,onBegin:h.default.func,canvasProps:h.default.object,clearOnResize:h.default.bool},v.defaultProps={clearOnResize:!0},e.default=v},function(t,e){t.exports=o},function(t,e){t.exports=s},function(t,e){t.exports=a},function(t,e){t.exports=r}]))},9590:function(t){t.exports=function(t){function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){"use strict";function n(t){var e=t.getContext("2d"),n=t.width,o=t.height,s=e.getImageData(0,0,n,o).data,i=a(!0,n,o,s),l=a(!1,n,o,s),c=r(!0,n,o,s),h=r(!1,n,o,s)-c+1,u=l-i+1,d=e.getImageData(c,i,h,u);return t.width=h,t.height=u,e.clearRect(0,0,h,u),e.putImageData(d,0,0),t}function o(t,e,n,o){return{red:o[4*(n*e+t)],green:o[4*(n*e+t)+1],blue:o[4*(n*e+t)+2],alpha:o[4*(n*e+t)+3]}}function s(t,e,n,s){return o(t,e,n,s).alpha}function a(t,e,n,o){for(var a=t?1:-1,r=t?0:n-1;t?r<n:r>-1;r+=a)for(var i=0;i<e;i++)if(s(i,r,e,o))return r;return null}function r(t,e,n,o){for(var a=t?1:-1,r=t?0:e-1;t?r<e:r>-1;r+=a)for(var i=0;i<n;i++)if(s(r,i,e,o))return r;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n}])},354:(t,e,n)=>{"use strict";function o(t,e,n){this.x=t,this.y=e,this.time=n||(new Date).getTime()}function s(t,e,n,o){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=o}function a(t,e){var n=this,o=e||{};this.velocityFilterWeight=o.velocityFilterWeight||.7,this.minWidth=o.minWidth||.5,this.maxWidth=o.maxWidth||2.5,this.throttle="throttle"in o?o.throttle:16,this.minDistance="minDistance"in o?o.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t,e,n){var o,s,a,r=null,i=0;n||(n={});var l=function(){i=!1===n.leading?0:Date.now(),r=null,a=t.apply(o,s),r||(o=s=null)};return function(){var c=Date.now();i||!1!==n.leading||(i=c);var h=e-(c-i);return o=this,s=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),i=c,a=t.apply(o,s),r||(o=s=null)):r||!1===n.trailing||(r=setTimeout(l,h)),a}}(a.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=a.prototype._strokeUpdate,this.dotSize=o.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=o.penColor||"black",this.backgroundColor=o.backgroundColor||"rgba(0,0,0,0)",this.onBegin=o.onBegin,this.onEnd=o.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(n._mouseButtonDown=!0,n._strokeBegin(t))},this._handleMouseMove=function(t){n._mouseButtonDown&&n._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];n._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];n._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===n._canvas&&(t.preventDefault(),n._strokeEnd(t))},this.on()}n.r(e),n.d(e,{default:()=>r}),o.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},o.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},o.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},s.prototype.length=function(){for(var t=0,e=void 0,n=void 0,o=0;o<=10;o+=1){var s=o/10,a=this._point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this._point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var i=a-e,l=r-n;t+=Math.sqrt(i*i+l*l)}e=a,n=r}return t},s.prototype._point=function(t,e,n,o,s){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*o*(1-t)*t*t+s*t*t*t},a.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},a.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new Image,s=n.ratio||window.devicePixelRatio||1,a=n.width||this._canvas.width/s,r=n.height||this._canvas.height/s;this._reset(),o.src=t,o.onload=function(){e._ctx.drawImage(o,0,0,a,r)},this._isEmpty=!1},a.prototype.toDataURL=function(t){var e;if("image/svg+xml"===t)return this._toSVG();for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return(e=this._canvas).toDataURL.apply(e,[t].concat(o))},a.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},a.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},a.prototype.isEmpty=function(){return this._isEmpty},a.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"===typeof this.onBegin&&this.onBegin(t)},a.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,o=this._createPoint(e,n),s=this._data[this._data.length-1],a=s&&s[s.length-1],r=a&&o.distanceTo(a)<this.minDistance;if(!a||!r){var i=this._addPoint(o),l=i.curve,c=i.widths;l&&c&&this._drawCurve(l,c.start,c.end),this._data[this._data.length-1].push({x:o.x,y:o.y,time:o.time,color:this.penColor})}},a.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var o=this._data[this._data.length-1],s=o[o.length-1];n.equals(s)||o.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"===typeof this.onEnd&&this.onEnd(t)},a.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},a.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},a.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},a.prototype._createPoint=function(t,e,n){var s=this._canvas.getBoundingClientRect();return new o(t-s.left,e-s.top,n||(new Date).getTime())},a.prototype._addPoint=function(t){var e=this.points;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);var n=this._calculateCurveControlPoints(e[0],e[1],e[2]).c2,o=this._calculateCurveControlPoints(e[1],e[2],e[3]).c1,a=new s(e[1],n,o,e[2]),r=this._calculateCurveWidths(a);return e.shift(),{curve:a,widths:r}}return{}},a.prototype._calculateCurveControlPoints=function(t,e,n){var s=t.x-e.x,a=t.y-e.y,r=e.x-n.x,i=e.y-n.y,l=(t.x+e.x)/2,c=(t.y+e.y)/2,h=(e.x+n.x)/2,u=(e.y+n.y)/2,d=Math.sqrt(s*s+a*a),p=Math.sqrt(r*r+i*i),f=p/(d+p),v=h+(l-h)*f,_=u+(c-u)*f,m=e.x-v,g=e.y-_;return{c1:new o(l+m,c+g),c2:new o(h+m,u+g)}},a.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,o={start:null,end:null},s=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(s);return o.start=this._lastWidth,o.end=a,this._lastVelocity=s,this._lastWidth=a,o},a.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},a.prototype._drawPoint=function(t,e,n){var o=this._ctx;o.moveTo(t,e),o.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},a.prototype._drawCurve=function(t,e,n){var o=this._ctx,s=n-e,a=Math.floor(t.length());o.beginPath();for(var r=0;r<a;r+=1){var i=r/a,l=i*i,c=l*i,h=1-i,u=h*h,d=u*h,p=d*t.startPoint.x;p+=3*u*i*t.control1.x,p+=3*h*l*t.control2.x,p+=c*t.endPoint.x;var f=d*t.startPoint.y;f+=3*u*i*t.control1.y,f+=3*h*l*t.control2.y,f+=c*t.endPoint.y;var v=e+c*s;this._drawPoint(p,f,v)}o.closePath(),o.fill()},a.prototype._drawDot=function(t){var e=this._ctx,n="function"===typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},a.prototype._fromData=function(t,e,n){for(var s=0;s<t.length;s+=1){var a=t[s];if(a.length>1)for(var r=0;r<a.length;r+=1){var i=a[r],l=new o(i.x,i.y,i.time),c=i.color;if(0===r)this.penColor=c,this._reset(),this._addPoint(l);else if(r!==a.length-1){var h=this._addPoint(l),u=h.curve,d=h.widths;u&&d&&e(u,d,c)}}else this._reset(),n(a[0])}},a.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,o=Math.max(window.devicePixelRatio||1,1),s=n.width/o,a=n.height/o,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"width",n.width),r.setAttributeNS(null,"height",n.height),this._fromData(e,(function(t,e,n){var o=document.createElement("path");if(!isNaN(t.control1.x)&&!isNaN(t.control1.y)&&!isNaN(t.control2.x)&&!isNaN(t.control2.y)){var s="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" "+t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);o.setAttribute("d",s),o.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),o.setAttribute("stroke",n),o.setAttribute("fill","none"),o.setAttribute("stroke-linecap","round"),r.appendChild(o)}}),(function(e){var n=document.createElement("circle"),o="function"===typeof t.dotSize?t.dotSize():t.dotSize;n.setAttribute("r",o),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("fill",e.color),r.appendChild(n)}));var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+s+" "+a+'" width="'+s+'" height="'+a+'">',l=r.innerHTML;if(void 0===l){var c=document.createElement("dummy"),h=r.childNodes;c.innerHTML="";for(var u=0;u<h.length;u+=1)c.appendChild(h[u].cloneNode(!0));l=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(i+l+"</svg>")},a.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,(function(t,n){return e._drawCurve(t,n.start,n.end)}),(function(t){return e._drawDot(t)})),this._data=t},a.prototype.toData=function(){return this._data};const r=a}}]);
//# sourceMappingURL=8330.8e86e2bb.chunk.js.map