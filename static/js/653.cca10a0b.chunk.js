"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[653],{9653:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var r=s(5043),l=s(3946),o=s(3354),a=s(4929),i=s(792),n=s(3727),c=s(7177),d=s(3023),u=s.n(d),p=s(4858),m=s(6213),h=s(9426),f=s(5718),g=s.n(f),x=s(579);const v=()=>{const[e,t]=(0,r.useState)(localStorage.getItem("authToken")||""),[s,d]=(0,r.useState)(!1),[f,v]=g()(),[b,j]=(0,r.useState)([]),[y,w]=(0,r.useState)([]),[k,_]=(0,r.useState)([]),[N,S]=(0,h.A)(),[C,M]=(0,r.useState)(!1),[I,E]=(0,r.useState)(!1),[F,T]=(0,r.useState)({}),[A,D]=(0,r.useState)(),O="AIzaSyDHKDicnezuQryxOPs8WhIWkZaHDRAvedQ",{handleSubmit:V,register:L,reset:P,formState:{errors:U}}=(0,p.mN)(),z=async()=>{try{const t={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},s=m.A.create(),r=await S(N,s,"/manage/additional_features/get_study_material_for_teachers","get",t,null,null);if(!1===r.error){var e;const t=r.response,s=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data;console.log(s),_(s)}}catch(t){console.log(t)}};(0,r.useEffect)((()=>{z()}),[b]),(0,r.useEffect)((()=>{(async()=>{try{const t={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},s=m.A.create(),r=await S(N,s,"/manage/get_subjects_of_teacher","get",t,null,null);if(!1===r.error){var e;const t=r.response,s=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data;w(s)}}catch(t){console.log(t)}})()}),[]),(0,r.useEffect)((()=>{if(v){const e=v.access_token;D(v.expires_in),localStorage.setItem("authToken",e),t(e),d(!0),window.location.reload()}}),[v]),(0,r.useEffect)((()=>{d(!!e)}),[e]);const q=()=>{f({clientId:"844209905502-hg3oiak3hj9e0n9apgfap2q24lrd41vj.apps.googleusercontent.com",developerKey:O,viewId:"DOCS",token:e,showUploadView:!0,showUploadFolders:!0,supportDrives:!0,multiselect:!0,customScopes:["https://www.googleapis.com/auth/drive"],callbackFunction:e=>{"cancel"===e.action?console.log("User clicked cancel/close button"):e.docs&&e.docs.length>0&&(j((t=>[...t,...e.docs])),e.docs.forEach((e=>{B(e.id)})))}})},B=async t=>{const s="https://www.googleapis.com/drive/v3/files/".concat(t,"/permissions?key=").concat(O);try{const r=await fetch(s,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({role:"reader",type:"anyone"})});if(r.ok)console.log("File ID ${fileId} is now sharable.",t);else{const e=await r.json();console.error("Error making file sharable:",e.error)}}catch(r){console.error("An error occurred while sharing the file:",r)}};return(0,r.useEffect)((()=>{console.log(k)}),[]),(0,x.jsxs)("div",{className:"card w-full p-2 sm:p-4 mx-auto","data-coreui-backdrop":"static",children:[(0,x.jsxs)(l.Xu,{children:[e&&(0,x.jsx)("div",{className:"mb-3 flex justify-end ",children:(0,x.jsx)("button",{type:"button",className:"btn bg-sky-600 text-white hover:bg-gray-400 focus:ring focus:ring-yellow-500 rounded-md px-2 sm:px-4 py-1 sm:py-2 text-xs sm:text-base",onClick:()=>{localStorage.removeItem("authToken"),t(""),d(!1)},children:(0,x.jsxs)("div",{className:"flex items-center justify-center gap-2 sm:gap-2",children:[(0,x.jsx)(o.lB,{icon:a.I,size:"sm"}),(0,x.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})})}),(0,x.jsxs)(l.E$,{className:"shadow-lg rounded-lg border border-gray-200",children:[(0,x.jsx)(l.V0,{className:"bg-[#c2bcf4] text-purple-900 text-lg sm:text-2xl py-2 sm:py-4 rounded-t-lg",children:"Upload Materials"}),(0,x.jsx)(l.W6,{className:"p-3 sm:p-6",children:s?(0,x.jsxs)("form",{className:"space-y-2 sm:space-y-4",onSubmit:V((e=>{const t=b.map((e=>({file_name:e.name,link:e.url}))),s={material_title:e.material_title,subject_slug:e.subject,materials:t},r=m.A.create();S(N,r,"/manage/additional_features/upload_study_material/","post",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},{material_title:s.material_title,materials:s.materials,subject_slug:s.subject_slug},null).then((e=>{!1===e.error?(z(),u()("Material Uploaded!","","success")):u()("Oops!",e.errorMessage.message,"error")})),P(),j([])})),autoComplete:"off",children:[(0,x.jsxs)("div",{className:"mb-2 sm:mb-4",children:[(0,x.jsx)("label",{className:"form-label text-base sm:text-lg font-semibold",children:"Title"}),(0,x.jsx)("input",{type:"text",className:"form-control border-gray-300 shadow-sm focus:border-yellow-500 focus:ring focus:ring-yellow-500 w-full",required:!0,...L("material_title")})]}),(0,x.jsxs)("div",{className:"mb-2 sm:mb-4",children:[(0,x.jsx)("label",{className:"form-label text-base sm:text-lg font-semibold",children:"Select Subject"}),(0,x.jsxs)("select",{...L("subject",{required:"Branch is required"}),className:"form-control shadow-sm focus:ring focus:ring-yellow-500 focus:ring-opacity-50 w-full border-gray-300 rounded-md",children:[(0,x.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,className:"text-gray-200",children:"Choose Subject"}),y.map(((e,t)=>(0,x.jsx)("option",{value:e.slug,children:e.subject_name},t)))]}),U.subject&&(0,x.jsx)("p",{className:"text-red-500 mt-1 text-xs sm:text-sm",children:U.subject.message})]}),(0,x.jsx)("div",{className:"mb-2 sm:mb-4",children:(0,x.jsxs)("button",{type:"button",className:"btn btn-outline-dark bg-blue-500 text-white hover:bg-black flex justify-center items-center gap-1 sm:gap-2 w-full sm:w-auto px-2 sm:px-4 py-1 sm:py-2 text-xs sm:text-base",onClick:q,children:[(0,x.jsx)(o.lB,{icon:i.D,size:"sm"}),(0,x.jsx)("span",{children:"Select Files"})]})}),b.length>0&&(0,x.jsx)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4",children:b.map((e=>(0,x.jsx)("li",{className:"bg-gray-50 p-1 sm:p-2 border rounded-md text-xs sm:text-sm",children:(0,x.jsx)("span",{className:"text-blue-600",children:e.name})},e.id)))}),(0,x.jsx)("button",{type:"submit",className:"btn btn-outline-dark bg-bg-transparent text-black rounded-md px-2 sm:px-4 py-2 sm:py-2 form-control hover:bg-neutral-200 focus:ring focus:ring-yellow-500 w-full text-xs sm:text-base",disabled:0===b.length,children:"Upload Files"})]}):(0,x.jsx)("button",{type:"button",className:"btn text-white bg-gray-200/30 hover:bg-gray-500/30 focus:bg-gray-500/50 hover:border-2 hover:border-red-500 rounded-lg px-2 sm:px-4 py-1 sm:py-2 border form-control w-full text-xs sm:text-base",onClick:q,children:(0,x.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 justify-center",children:[(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"20",height:"20",viewBox:"0 0 48 48",children:[(0,x.jsx)("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\ts5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20\ts20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,x.jsx)("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039\tl5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,x.jsx)("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,x.jsx)("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),(0,x.jsx)("div",{className:"text-sm sm:text-lg text-black font-bold",children:"Login with Google"})]})})})]})]}),(0,x.jsx)(l.Xu,{className:"mt-2 sm:mt-4 flex justify-center",children:(0,x.jsx)(l.sK,{className:"mt-1 sm:mt-2 w-full",children:(0,x.jsx)(l.UF,{xs:!0,children:(0,x.jsxs)(l.E$,{className:"mb-2 sm:mb-4",children:[(0,x.jsx)(l.V0,{onClick:()=>{M(!C)},className:"cursor-pointer",children:(0,x.jsxs)("div",{className:"flex flex-wrap justify-between items-center",children:[(0,x.jsx)("div",{children:(0,x.jsx)("strong",{className:"text-sm sm:text-base",children:"File History"})}),(0,x.jsx)(o.lB,{icon:C?n.H:c.t,size:"lg",className:"hover:scale-125 ease-in-out transition-all duration-150 cursor-pointer"})]})}),C&&(0,x.jsx)(l.W6,{className:"transition ease-in-out duration-150 p-1 sm:p-3",children:(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)(l._v,{align:"middle",className:"mb-0 border text-center text-xs sm:text-sm",hover:!0,responsive:!0,children:[(0,x.jsx)(l.wV,{color:"light",children:(0,x.jsxs)(l.YI,{children:[(0,x.jsx)(l.$s,{children:"Sr.No"}),(0,x.jsx)(l.$s,{children:"File Name"}),(0,x.jsx)(l.$s,{children:"Subject"}),(0,x.jsx)(l.$s,{children:"Link"})]})}),(0,x.jsx)(l.jS,{children:k&&k.length>0&&k.map(((e,t)=>{var s,r;return(0,x.jsxs)(l.YI,{"v-for":"item in tableItems",children:[(0,x.jsx)(l.cC,{children:t+1}),(0,x.jsx)(l.cC,{children:e.title}),(0,x.jsx)(l.cC,{children:null===e||void 0===e||null===(s=e.subject)||void 0===s?void 0:s.subject_name}),(0,x.jsxs)(l.cC,{children:[(0,x.jsx)(l.V0,{onClick:()=>(e=>{T((t=>({...t,[e]:!t[e]})))})(t),className:"cursor-pointer rounded-lg border p-1 sm:p-2",children:(0,x.jsxs)("div",{className:"flex flex-wrap justify-between items-center",children:[(0,x.jsx)("div",{children:(0,x.jsx)("strong",{className:"text-xs sm:text-sm",children:"Links"})}),(0,x.jsx)(o.lB,{icon:F[t]?n.H:c.t,size:"lg",className:"hover:scale-125 ease-in-out transition-all duration-150 cursor-pointer"})]})}),F[t]&&(0,x.jsx)("div",{className:"overflow-x-auto whitespace-nowrap",children:(0,x.jsx)(l._v,{align:"middle",className:"mb-0 border text-center text-xs",hover:!0,responsive:!0,children:(0,x.jsx)(l.jS,{children:null===e||void 0===e||null===(r=e.links)||void 0===r?void 0:r.map(((e,t)=>(0,x.jsx)(l.YI,{children:(0,x.jsx)(l.cC,{children:(0,x.jsx)("a",{href:e.link,target:"_blank",className:"text-primary",rel:"noopener noreferrer",children:e.filename.length>10?e.filename.slice(0,10)+"...":e.filename})})},t)))})})})]})]},t)}))})]})})})]})})})})]})}},7177:(e,t,s)=>{s.d(t,{t:()=>r});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M256,16C123.452,16,16,123.452,16,256S123.452,496,256,496,496,388.548,496,256,388.548,16,256,16ZM403.078,403.078a207.253,207.253,0,1,1,44.589-66.125A207.332,207.332,0,0,1,403.078,403.078Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='272.112 314.481 272.112 128 240.112 128 240.112 314.481 165.059 239.429 142.432 262.056 256.112 375.736 369.793 262.056 347.166 239.429 272.112 314.481' class='ci-primary'/>"]},3727:(e,t,s)=>{s.d(t,{H:()=>r});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M256,16C123.452,16,16,123.452,16,256S123.452,496,256,496,496,388.548,496,256,388.548,16,256,16ZM403.078,403.078a207.253,207.253,0,1,1,44.589-66.125A207.332,207.332,0,0,1,403.078,403.078Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='142.319 241.027 164.947 263.654 240 188.602 240 376 272 376 272 188.602 347.053 263.654 369.681 241.027 256 127.347 142.319 241.027' class='ci-primary'/>"]},5718:function(e,t,s){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var l in t=arguments[s])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},r.apply(this,arguments)},l=this&&this.__spreadArray||function(e,t,s){if(s||2===arguments.length)for(var r,l=0,o=t.length;l<o;l++)!r&&l in t||(r||(r=Array.prototype.slice.call(t,0,l)),r[l]=t[l]);return e.concat(r||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(5043),i=s(8212),n=o(s(9267));t.default=function(){var e,t=["https://www.googleapis.com/auth/drive.readonly"],s=(0,n.default)("https://apis.google.com/js/api.js"),o=s[0],c=s[1],d=(0,n.default)("https://accounts.google.com/gsi/client"),u=d[0],p=d[1],m=(0,a.useState)(!1),h=m[0],f=m[1],g=(0,a.useState)(!1),x=g[0],v=g[1],b=(0,a.useState)(!1),j=(b[0],b[1],(0,a.useState)(i.defaultConfiguration)),y=j[0],w=j[1],k=(0,a.useState)(),_=k[0],N=k[1];(0,a.useEffect)((function(){!o||c||!u||p||h||S()}),[o,c,u,p,h]),(0,a.useEffect)((function(){x&&y.token&&o&&!c&&u&&!p&&h&&(M(y),v(!1))}),[x,y.token,o,c,u,p,h]);var S=function(){window.gapi.load("auth"),window.gapi.load("picker",{callback:C})},C=function(){f(!0)},M=function(t){var s=t.token,r=t.appId,l=void 0===r?"":r,o=t.supportDrives,a=void 0!==o&&o,i=t.developerKey,n=t.viewId,c=void 0===n?"DOCS":n,d=t.disabled,u=t.multiselect,p=t.setOrigin,m=t.showUploadView,h=void 0!==m&&m,f=t.showUploadFolders,g=t.setParentFolder,x=void 0===g?"":g,v=t.viewMimeTypes,b=t.customViews,j=t.locale,y=void 0===j?"en":j,w=t.setIncludeFolders,k=t.setSelectFolderEnabled,_=t.disableDefaultView,N=void 0!==_&&_,S=t.callbackFunction;if(d)return!1;var C=new google.picker.DocsView(google.picker.ViewId[c]);v&&C.setMimeTypes(v),w&&C.setIncludeFolders(!0),k&&C.setSelectFolderEnabled(!0);var M=new google.picker.DocsUploadView;return v&&M.setMimeTypes(v),f&&M.setIncludeFolders(!0),x&&M.setParent(x),x&&C.setParent(x),e=(new google.picker.PickerBuilder).setAppId(l).setOAuthToken(s).setDeveloperKey(i).setLocale(y).setCallback(S),p&&e.setOrigin(p),N||e.addView(C),b&&b.map((function(t){return e.addView(t)})),u&&e.enableFeature(google.picker.Feature.MULTISELECT_ENABLED),h&&e.addView(M),a&&e.enableFeature(google.picker.Feature.SUPPORT_DRIVES),e.build().setVisible(!0),!0};return[function(e){(w(e),e.token)||google.accounts.oauth2.initTokenClient({client_id:e.clientId,scope:(e.customScopes?l(l([],t,!0),e.customScopes,!0):t).join(" "),callback:function(t){N(t),M(r(r({},e),{token:t.access_token}))}}).requestAccessToken();if(e.token&&o&&!c&&h)return M(e)},_]}},8212:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultConfiguration=void 0,t.defaultConfiguration={clientId:"",developerKey:"",viewId:"DOCS",callbackFunction:function(){return null}}},9267:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=s(5043),l={queue:{},injectorMap:{},scriptMap:{}};t.default=function(e){var t=(0,r.useState)({loaded:!1,error:!1}),s=t[0],o=t[1];return(0,r.useEffect)((function(){var t,s,r,a,i;if((null===(t=l.injectorMap)||void 0===t?void 0:t[e])||(l.injectorMap[e]="init"),"loaded"!==l.injectorMap[e]){if("error"!==l.injectorMap[e]){var n=function(t){var s,r,o,a;t&&console.log("error loading the script"),null===(r=null===(s=l.queue)||void 0===s?void 0:s[e])||void 0===r||r.forEach((function(e){return e(t)})),t&&l.scriptMap[e]?(null===(a=null===(o=l.scriptMap)||void 0===o?void 0:o[e])||void 0===a||a.remove(),l.injectorMap[e]="error"):l.injectorMap[e]="loaded",delete l.scriptMap[e]},c=function(e){o({loaded:!0,error:e})};return(null===(s=l.scriptMap)||void 0===s?void 0:s[e])||(l.scriptMap[e]=document.createElement("script"),l.scriptMap[e]&&(l.scriptMap[e].src=e,l.scriptMap[e].async=!0,document.body.append(l.scriptMap[e]),l.scriptMap[e].addEventListener("load",(function(){return n(!1)})),l.scriptMap[e].addEventListener("error",(function(){return n(!0)})),l.injectorMap[e]="loading")),(null===(r=l.queue)||void 0===r?void 0:r[e])?null===(i=null===(a=l.queue)||void 0===a?void 0:a[e])||void 0===i||i.push(c):l.queue[e]=[c],function(){var t,s;l.scriptMap[e]&&(null===(t=l.scriptMap[e])||void 0===t||t.removeEventListener("load",(function(){return n(!0)})),null===(s=l.scriptMap[e])||void 0===s||s.removeEventListener("error",(function(){return n(!0)})))}}o({loaded:!0,error:!0})}else o({loaded:!0,error:!1})}),[e]),[s.loaded,s.error]}}}]);
//# sourceMappingURL=653.cca10a0b.chunk.js.map