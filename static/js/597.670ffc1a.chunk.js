"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[597],{7597:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(5043),l=t(4858),r=t(3946),n=t(6213),i=t(9426),c=t(6178),o=t.n(c),d=t(579);const m=()=>{const[e,s]=(0,i.A)(),[t,c]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!0),[g,p]=(0,a.useState)([]),{register:j,handleSubmit:b,watch:w,formState:{errors:f}}=(0,l.mN)(),y=async t=>{const a=n.A.create(),l=await s(e,a,"/manage/session/submit_survey/","post",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},t,null);if(!1===l.error){l.response}else p((e=>[...e,t.survey_slug])),alert(l.errorMessage.message)};return(0,a.useEffect)((()=>{(async()=>{const t=n.A.create(),a=await s(e,t,"/manage/get_timetable_for_student","get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},null,null);if(!1===a.error){const e=a.response;c(e.data.data)}})()}),[]),(0,a.useEffect)((()=>{navigator.permissions.query({name:"geolocation"}).then((e=>{"granted"===e.state?u(!0):("prompt"===e.state||"denied"===e.state)&&navigator.geolocation.getCurrentPosition((e=>{u(!0)})),e.addEventListener("change",(()=>{"granted"===e.state?u(!0):("prompt"===e.state||"denied"===e.state)&&u(!1)}))}))}),[m]),(0,d.jsx)(d.Fragment,{children:m?(0,d.jsx)(r.sK,{className:"mb-3",children:(0,d.jsx)(r.UF,{children:t&&t.map(((t,a)=>t.timetables.map(((a,l)=>(0,d.jsxs)("div",{children:[(0,d.jsx)(r.kj,{className:"m-0 rounded-0 w-100 p-2 d-flex justify-content-between align-items-center mb-2",color:"primary",visible:!0,children:t.branch_name}),a.schedule?a.schedule.lectures.length>0?a.schedule.lectures.map(((t,l)=>(0,d.jsx)("div",{children:(0,d.jsx)(r.sK,{className:"flex-column",style:{padding:"0"},children:(0,d.jsx)(r.UF,{className:"d-flex align-items-center flex-column",children:(0,d.jsx)("div",{className:"w-100 rounded-0 border-0",children:(0,d.jsx)("div",{className:"",style:{paddingBottom:"0px"},children:(0,d.jsx)("div",{className:"justify-content-center w-100",children:(0,d.jsxs)(r.JY,{autohide:!1,visible:!0,className:"mb-3 mt-3 w-100 ".concat(t.is_proxy?"border-red-700":""),children:[(0,d.jsxs)(r.AH,{className:"d-flex flex-wrap justify-content-sm-between justify-content-center mx-2",children:[(0,d.jsxs)("div",{className:"w-100 fw-bold text-center text-sm-start text-md-start text-lg-start",children:[(0,d.jsx)("div",{children:(0,d.jsxs)("small",{className:"mx-2 my-2",children:["Semester: ",a.division.semester.no," | Division : ",a.division.division_name]})}),(0,d.jsx)("div",{children:t.is_proxy?(0,d.jsxs)("small",{className:"mx-2 my-2",children:[t.is_proxy?"Proxied from ":"",t.link?t.link.from_lecture.subject.subject_name:""]}):null}),(0,d.jsx)("hr",{className:"w-100 my-2"})]}),(0,d.jsx)("div",{className:"fw-bold mx-2",children:t.subject.subject_name.charAt(0).toUpperCase()+t.subject.subject_name.slice(1)}),(0,d.jsx)("small",{className:"mx-2 my-2",children:t.type.toUpperCase()}),(0,d.jsxs)("small",{className:"mx-2 my-2",children:[o()(t.start_time.slice(0,5),"HH:mm").format("h:mm A")," ","|"," ",o()(t.end_time.slice(0,5),"HH:mm").format("h:mm A")]})]}),(0,d.jsxs)(r.Bw,{className:"d-flex flex-row flex-wrap justify-content-center",children:[(0,d.jsxs)(r.sK,{className:"w-100 align-items-center",children:[(0,d.jsxs)(r.UF,{className:"text-sm-start text-center col-12 col-sm-4 col-lg-4 col-md-4",children:["Prof -"," ",t.teacher.charAt(0).toUpperCase()+t.teacher.slice(1)]}),(0,d.jsx)(r.UF,{className:" text-sm-end col-12 col-sm-4 col-lg-4 col-md-4",children:(0,d.jsxs)("div",{className:"w-100 text-center",children:[" ",t.batches.map(((e,s)=>(0,d.jsxs)("span",{children:[e.batch_name.toUpperCase(),s<t.batches.length-1&&", "]},s)))," "]})}),(0,d.jsxs)(r.UF,{className:"text-sm-end text-center col-12 col-sm-4 col-lg-4 col-md-4",children:[t.classroom.class_name.charAt(0).toUpperCase()+t.classroom.class_name.slice(1)," "]})]}),(0,d.jsx)("div",{className:"d-flex w-100",children:(0,d.jsxs)("div",{className:"w-100",children:[("pre"===t.session.active||"ongoing"===t.session.active)&&(0,d.jsx)("button",{className:"btn ".concat(t.session.attendances.is_present?"btn-outline-secondary":"btn-outline-primary"," w-100 mt-3"),value:t.slug,onClick:a=>!t.session.attendances.is_present&&(async(t,a)=>{if(navigator.geolocation)try{navigator.geolocation.getCurrentPosition((async l=>{const r=l.coords.latitude,i=l.coords.longitude,c=n.A.create(),o=await s(e,c,"/manage/session/mark_attendance_for_student/","post",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},{lecture_slug:a,latitude:r,longitude:i},null);!1===o.error?!0===o.response.data.data&&(t.disabled=!0,t.classList.add("btn-outline-secondary"),alert("your Attendance Marked successfully")):(100==o.errorMessage.code&&(t.disabled=!0,t.classList.add("btn-outline-secondary")),alert(o.errorMessage.message))}),(e=>{alert(e.message)}),{enableHighAccuracy:!0,maximumAge:0})}catch(l){return void alert("Location services are not available, Please enable it from you browser")}else alert("Geolocation is not supported by this browser.")})(a.target,a.target.value),disabled:t.session.attendances.is_present,children:"Mark Your Attendance"}),"post"===t.session.active&&(0,d.jsx)("button",{className:"btn btn-outline-secondary w-100 mt-3",disabled:!0,children:"Session Ended"})]})}),t.survey&&!g.includes(t.survey.slug)?(0,d.jsx)("form",{className:"w-100",onSubmit:b(y),children:(0,d.jsxs)("div",{className:"d-flex w-full",children:[(0,d.jsx)("input",{type:"hidden",value:t.survey.slug,...j("survey_slug")}),(0,d.jsxs)("div",{className:"w-100",children:[(0,d.jsx)("button",{type:"button",className:" w-full bg-blue-700 p-2 mt-3 text-white",onClick:()=>h(!x),children:"Attend Survey"}),(0,d.jsxs)(r.Bw,{className:"flex-row flex-wrap justify-content-center bg-slate-200 ".concat(x?"hidden":"flex"),children:[(0,d.jsxs)("div",{className:"w-100 fw-bold text-center text-sm-start text-md-start text-lg-start",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("small",{className:"mx-2 my-2 text-lg block",children:t.survey.title}),(0,d.jsxs)("small",{className:"mx-2 my-2 text-xs flex items-center gap-2 text-blue-800",children:[(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-check2-circle",viewBox:"0 0 16 16",children:[(0,d.jsx)("path",{d:"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0"}),(0,d.jsx)("path",{d:"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"})]}),"single"==t.survey.allowd_choices?"Choose One":"Choose Many"]})]}),(0,d.jsx)("hr",{className:"w-100 my-2"})]}),t.survey.options.map(((e,s)=>(0,d.jsxs)("div",{className:"w-100 fw-bold text-center text-sm-start text-md-start text-lg-start",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("small",{className:"mx-2 my-2 text-[1rem] text-black flex items-center gap-2",children:[(0,d.jsx)("input",{id:"default-radio-1",type:"radio",value:e.slug,name:"default-radio",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",...j("marked_option_slug")}),e.option]}),(0,d.jsx)("div",{className:"w-full bg-gray-200  rounded-full h-2 dark:bg-gray-700",children:(0,d.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(e.submission_percentage,"%")}})})]}),(0,d.jsx)("hr",{className:"w-100 my-2"})]},s))),(0,d.jsx)("div",{className:"flex-initial py-3 w-full",children:(0,d.jsxs)("button",{className:"w-full justify-center flex items-center px-5 py-2.5 font-medium tracking-wide text-white capitalize   bg-slate-800 rounded-md hover:bg-gray-800  focus:outline-none focus:bg-gray-900  transition duration-300 transform active:scale-95 ease-in-out",type:"submit",children:[(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:[(0,d.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,d.jsx)("path",{d:"M5 5v14h14V7.83L16.17 5H5zm7 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-8H6V6h9v4z",opacity:".3"}),(0,d.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"})]}),(0,d.jsx)("span",{className:"pl-2 mx-1",children:"Submit"})]})})]})]})]})}):null,(0,d.jsx)("div",{})]})]},l)})})})},l)})},l))):(0,d.jsx)("div",{className:"d-flex w-100 justify-content-center",children:(0,d.jsx)("div",{className:"alert alert-warning w-75 my-2 text-center ",children:(0,d.jsx)("span",{className:"",children:"No lecture sessions are there for this branch"})})}):(0,d.jsx)("div",{className:"d-flex justify-content-center w-full my-3",children:(0,d.jsx)(r.JY,{className:"w-100",animation:!1,autohide:!1,visible:!0,children:(0,d.jsx)(r.Bw,{className:"text-center w-full",children:"There is no lecture today...."})})})]},l)))))})}):(0,d.jsx)("iframe",{width:"100%",height:"315",src:"https://www.youtube.com/embed/ERhEIsEXG50?si=i9ez0hxneFCuAe6E",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})}}}]);
//# sourceMappingURL=597.670ffc1a.chunk.js.map