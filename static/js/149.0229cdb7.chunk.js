"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[149],{443:(e,s,t)=>{t.d(s,{Z:()=>u});t(2791);var a=t(4846),n=t(4546),r=t(1698),l=t(3899),o=t(1517),c=t(9909),i=t(3570),d=t(4479),h=t(2937),m=t(184);const u={admin_role:[{component:h.fd,name:"ADMNISTRATION"},{component:h.U6,name:"Dashboard",to:"/",icon:(0,m.jsx)(a.Z,{icon:n.V,customClassName:"nav-icon"})},{component:h.U6,name:"Subject",to:"/subject",icon:(0,m.jsx)(a.Z,{icon:r.E,customClassName:"nav-icon"})},{component:h.U6,name:"Teachers",to:"/manage-teachers",icon:(0,m.jsx)(a.Z,{icon:l.J,customClassName:"nav-icon"})},{component:h.U6,name:"Add Student",to:"/addstudent",icon:(0,m.jsx)(a.Z,{icon:o.g,customClassName:"nav-icon"})},{component:h.U6,name:"Timetable",to:"/timetable",icon:(0,m.jsx)(a.Z,{icon:c.J,customClassName:"nav-icon"})},{component:h.U6,name:"Logout",to:"/logout",icon:(0,m.jsx)(a.Z,{icon:i.V,customClassName:"nav-icon"})}],teacher_role:[{component:h.U6,name:"Dashboard",to:"/teacher/dashboard",icon:(0,m.jsx)(a.Z,{icon:n.V,customClassName:"nav-icon"})},{component:h.U6,name:"LectureHistory",to:"/teacher/lectures/history",icon:(0,m.jsx)(a.Z,{icon:d.$,customClassName:"nav-icon"})},{component:h.U6,name:"Logout",to:"/logout",icon:(0,m.jsx)(a.Z,{icon:i.V,customClassName:"nav-icon"})}],student_role:[{component:h.U6,name:"Dashboard",to:"/studentdashboard",icon:(0,m.jsx)(a.Z,{icon:n.V,customClassName:"nav-icon"})},{component:h.U6,name:"Logout",to:"/logout",icon:(0,m.jsx)(a.Z,{icon:i.V,customClassName:"nav-icon"})}]}},2958:(e,s,t)=>{t.d(s,{I:()=>n,t:()=>a});const a="".concat(window.location.protocol,"//").concat(window.location.host),n="http:"===window.location.protocol?"ws://".concat(window.location.host):"wss://".concat(window.location.host)},3193:(e,s,t)=>{t.d(s,{$:()=>c});var a=t(2791),n=t(7689),r=t(1087),l=t(2937),o=t(184);const c=e=>{let{items:s}=e;const t=(0,n.TH)(),c=(e,s,t)=>(0,o.jsxs)(o.Fragment,{children:[s&&s,e&&e,t&&(0,o.jsx)(l.C_,{color:t.color,className:"ms-auto",children:t.text})]}),i=(e,s)=>{const{component:t,name:n,badge:l,icon:o,...i}=e,d=t;return(0,a.createElement)(d,{...i.to&&!i.items&&{component:r.OL},key:s,...i},c(n,o,l))},d=(e,s)=>{var a;const{component:n,name:r,icon:l,to:h,...m}=e,u=n;return(0,o.jsx)(u,{idx:String(s),toggler:c(r,l),visible:t.pathname.startsWith(h),...m,children:null===(a=e.items)||void 0===a?void 0:a.map(((e,s)=>e.items?d(e,s):i(e,s)))},s)};return(0,o.jsx)(a.Fragment,{children:s&&s.map(((e,s)=>e.items?d(e,s):i(e,s)))})}},3645:(e,s,t)=>{t.d(s,{J:()=>o,w:()=>i});var a=t(5294),n=t(2958),r=t(2062),l=t.n(r);const o=async function(e,s,t,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const i=localStorage.getItem("accessToken"),d=localStorage.getItem("refreshToken");let h;if(a.Authorization="Bearer ".concat(i),window.setProgress(100),"get"===t)try{h={error:!1,response:await e.get("".concat(n.t).concat(s),{headers:a,params:l})}}catch(m){if(m.response&&401===m.response.status){const n=await c(d);localStorage.setItem("accessToken",n.access),localStorage.setItem("refreshToken",n.refresh),h=await o(e,s,t,a,r,l)}else h={error:!0,error:m}}else if("post"===t)try{h={error:!1,response:await e.post("".concat(n.t).concat(s),r,{headers:a})}}catch(m){if(m.response&&401===m.response.status){const n=await c(d);localStorage.setItem("accessToken",n.access),localStorage.setItem("refreshToken",n.refresh),h=await o(e,s,t,a,r,l)}else h={error:!0,error:m}}return h},c=async e=>a.Z.post("".concat(n.t,"/auth/api/token/refresh/"),{refresh:e},{headers:{"ngrok-skip-browser-warning":!0}}).then((e=>e.data)).catch((e=>{throw e})),i=(e,s)=>{l()({title:e,text:s,icon:"success",button:"OK"})}},9160:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(5294),n=t(2958);const r=async(e,s)=>{a.Z.post("".concat(n.t,"/auth/api/token/refresh/"),{refresh:e},{headers:{"ngrok-skip-browser-warning":!0}}).then((e=>{localStorage.setItem("accessToken",e.data.access),localStorage.setItem("refreshToken",e.data.refresh),s(!0)})).catch((e=>{}))}},9792:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(5294),n=t(7689),r=t(2791),l=t(2585),o=t(2958);const c=async(e,s,t,n,r,l)=>{if("get"===t)return await a.Z.get("".concat(o.t).concat(s),{headers:n,params:l});if("post"===t)return await a.Z.post("".concat(o.t).concat(s),r,{headers:n});throw new Error("Invalid HTTP method")},i=async e=>{try{return(await a.Z.post("".concat(o.t,"/auth/api/token/refresh/, { refresh: ").concat(e," }, { headers: header }"))).data}catch(s){if(401===s.response.status)return{action:"tokenExpired",status:s.response.status}}},d=()=>{const e=(0,n.s0)(),{state:s,dispatch:t}=(0,r.useContext)(l.y),{accessToken:a,refreshToken:o,profileDetails:d,objectCount:h}=s,m={accessToken:a,refreshToken:o},u=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l.Authorization="Bearer ".concat(s.accessToken);try{return{error:!1,response:await c(a,n,r,l,o,d)}}catch(h){if(!h.response||401!==h.response.status)return{error:!0,errorMessage:h.response.data||"Unknown error"};{const c=await i(s.refreshToken);if(c.access&&c.refresh){const e={accessToken:c.access,refreshToken:c.refresh};return localStorage.setItem("accessToken",c.access),localStorage.setItem("refreshToken",c.refresh),t({type:"ACCESS_TOKEN",payload:c.access}),t({type:"REFRESH_TOKEN",payload:c.refresh}),u(e,a,n,r,l,o,d)}if("tokenExpired"==c.action&&401===c.status)return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e("/auth/sign-in/"),{error:!0,result:c}}}};return[m,u]}},1912:(e,s,t)=>{t.r(s),t.d(s,{default:()=>U});var a=t(2791),n=t(2937),r=t(9792),l=t(5294),o=(t(2673),t(183),t(6912)),c=t(184);const i=e=>{let{visible:s,setVisible:t,attendances:i,session_data:d}=e;const h=(0,a.useRef)(null),[m,u]=(0,a.useState)(!1),[x,j]=(0,r.Z)();(0,a.useEffect)((()=>{h.current&&u(!0)}),[h.current]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(n.N3,{className:"card w-100",placement:"end",visible:s,onHide:()=>t(!1),"data-coreui-backdrop":"static",children:[(0,c.jsx)(n.Gc,{color:"success",visible:!0,className:"justify-content-between align-items-center d-flex",children:(0,c.jsx)("svg",{onClick:()=>t(!1),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-x-lg",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"})})}),(0,c.jsxs)(n.xF,{children:[(0,c.jsx)("div",{className:"w-100",children:h.current?(0,c.jsx)(o.DownloadTableExcel,{filename:"".concat(d.lecture.subject.subject_name," - ").concat(new Date(d.day).toLocaleString()),sheet:"attendance",currentTableRef:h.current,children:(0,c.jsx)("button",{className:"my-2 w-100 btn btn btn-outline-primary",children:" Export excel "})}):null}),(0,c.jsx)(n.rb,{className:"w-100 flex-col",children:(0,c.jsx)(n.b7,{className:"col-12",children:(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{align:"middle",className:"table align-middle table-hover text-center mb-0 border hover responsive",ref:h,children:[(0,c.jsxs)(n.V,{color:"light",children:[(0,c.jsx)(n.T6,{"aria-colspan":5,children:(0,c.jsx)(n.is,{colSpan:5,children:"L.D COLLEGE OF ENGINEERING"})}),(0,c.jsx)(n.T6,{"aria-colspan":5,children:(0,c.jsxs)(n.is,{colSpan:5,children:["Subject: ",d.lecture.subject.subject_name," | DATE: ",d.day]})}),(0,c.jsxs)(n.T6,{children:[(0,c.jsx)(n.is,{children:"Enrollment No"}),(0,c.jsx)(n.is,{children:"Student Name"}),(0,c.jsx)(n.is,{children:"Batch"}),(0,c.jsx)(n.is,{children:"Status"})]})]}),(0,c.jsx)(n.NR,{children:i&&i.map(((e,s)=>(0,c.jsxs)(n.T6,{"v-for":"alert alert-primary item in tableItems",style:e.manual?{border:"2px solid darkorange"}:null,children:[(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:e.student.enrollment?e.student.enrollment:"-"})}),(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:e.student.profile.name?e.student.profile.name:"-"})}),(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:e.batches?e.batches.map(((e,s)=>(0,c.jsx)("span",{children:e.batch_name.toUpperCase()},s))):"-"})}),e.is_present?(0,c.jsx)(n.NN,{children:(0,c.jsxs)("div",{className:"text-success d-flex justify-content-center align-items-center",children:[(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"mx-auto bi bi-patch-check",viewBox:"0 0 16 16",children:[(0,c.jsx)("path",{fillRule:"evenodd",d:"M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0"}),(0,c.jsx)("path",{d:"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"})]}),(0,c.jsx)("p",{style:{visibility:"hidden"},children:"P"})]})}):(0,c.jsx)(n.NN,{children:(0,c.jsxs)("div",{className:"text-success d-flex justify-content-center align-items-center",children:[(0,c.jsx)("input",{type:"checkbox",onClick:s=>{(async(e,s)=>{e.preventDefault();try{if(!confirm("Are you sure you want to mark the attendance manually?"))return;console.log(s),e.target.checked="checked",e.target.disabled=!0;const r=l.Z.create(),o={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},c={attendance_slug:s},i=await j(x,r,"/manage/session/mark_attendance_for_absent_student/","post",o,c,null);if(!1===i.error){i.response;const s=e.target.parentElement,r=s.children;r[1].innerText="P",s.removeChild(r[0]);var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("width","16"),t.setAttribute("height","16"),t.setAttribute("fill","currentColor"),t.setAttribute("class","mx-auto bi bi-patch-check"),t.setAttribute("viewBox","0 0 16 16");var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("fill-rule","evenodd"),a.setAttribute("d","M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0");var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"),t.appendChild(a),t.appendChild(n),s.prepend(t)}else alert(i.errorMessage.message)}catch(r){alert(r.message)}})(s,e.slug)}}),(0,c.jsx)("p",{style:{visibility:"hidden"},children:"F"})]})})]},s)))})]})})})})]})]})})},d=()=>{const[e,s]=(0,r.Z)(),[t,o]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[x,j]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),f=e=>{console.log(e);const s=d.filter((s=>s.session.some((s=>s.day===e))));s.length>0?u(s):u(null)},y=async t=>{const a=l.Z.create(),n=await s(e,a,"/manage/session/get_session_data_for_export/".concat(t),"get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},null,null);if(!1===n.error){const e=n.response;j(e.data.data.marked_attendances),v(e.data.data),g(!0)}else alert(n.errorMessage.message)};return(0,a.useEffect)((()=>{(async()=>{const t=l.Z.create(),a=await s(e,t,"/manage/get_subjects_of_teacher","get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},null,null);if(!1===a.error){const e=a.response;o(e.data.data)}else alert(a.errorMessage.message)})()}),[]),(0,c.jsxs)(c.Fragment,{children:[t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label",children:"Select A Subject"}),(0,c.jsxs)("select",{className:"form-select","aria-label":"Default select example",required:!0,onChange:t=>{(async t=>{const a=l.Z.create(),n=await s(e,a,"/manage/get_lecture_sessions_for_teacher","get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},null,{subject_slug:t});if(!1===n.error){const e=n.response;h(e.data.data)}else alert(n.errorMessage.message)})(t.target.value)},children:[(0,c.jsx)("option",{value:"",children:"...."}),t&&t.map(((e,s)=>(0,c.jsx)("option",{value:e.slug,children:e.subject_name},s)))]})]}),m?(0,c.jsx)(n.rb,{children:(0,c.jsx)(n.b7,{xs:!0,children:(0,c.jsxs)(n.xH,{className:"mb-4",children:[(0,c.jsx)(n.bn,{children:(0,c.jsxs)("div",{className:"d-flex flex-wrap justify-between",children:[(0,c.jsx)("div",{children:(0,c.jsx)("strong",{children:"Subject Attendance History"})}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)("div",{children:(0,c.jsx)(n.jO,{type:"date",id:"validationCustom01",required:!0,onChange:e=>{f(e.target.value)}})}),(0,c.jsx)("div",{className:"mx-2"})]})})]})}),(0,c.jsx)(n.sl,{children:(0,c.jsxs)(n.Sx,{align:"middle",className:"mb-0 border text-center",hover:!0,responsive:!0,children:[(0,c.jsx)(n.V,{color:"light",children:(0,c.jsxs)(n.T6,{children:[(0,c.jsx)(n.is,{children:"classroom"}),(0,c.jsx)(n.is,{children:"Lecture Type"}),(0,c.jsx)(n.is,{children:"Day"})]})}),(0,c.jsx)(n.NR,{children:m.map(((e,s)=>e.session.map(((s,t)=>(0,c.jsxs)(n.T6,{"v-for":"item in tableItems",onClick:e=>y(s.session_id),children:[(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:e.classroom})}),(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:s.day})})]},t)))))})]})})]})})}):d?(0,c.jsx)(n.rb,{children:(0,c.jsx)(n.b7,{xs:!0,children:(0,c.jsxs)(n.xH,{className:"mb-4",children:[(0,c.jsx)(n.bn,{children:(0,c.jsxs)("div",{className:"d-flex flex-wrap justify-between",children:[(0,c.jsx)("div",{children:(0,c.jsx)("strong",{children:"Subject Attendance History"})}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)("div",{children:(0,c.jsx)(n.jO,{type:"date",id:"validationCustom01",required:!0,onChange:e=>{f(e.target.value)}})}),(0,c.jsx)("div",{className:"mx-2"})]})})]})}),(0,c.jsx)(n.sl,{children:(0,c.jsxs)(n.Sx,{align:"middle",className:"mb-0 border text-center",hover:!0,responsive:!0,children:[(0,c.jsx)(n.V,{color:"light",children:(0,c.jsxs)(n.T6,{children:[(0,c.jsx)(n.is,{children:"classroom"}),(0,c.jsx)(n.is,{children:"Lecture Type"}),(0,c.jsx)(n.is,{children:"Day"})]})}),(0,c.jsx)(n.NR,{children:d.length>0?d.map(((e,s)=>e.session.map(((s,t)=>(0,c.jsxs)(n.T6,{"v-for":"item in tableItems",onClick:e=>y(s.session_id),children:[(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:e.classroom})}),(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),(0,c.jsx)(n.NN,{children:(0,c.jsx)("div",{children:s.day})})]},t))))):(0,c.jsx)(n.T6,{"v-for":"item in tableItems",children:(0,c.jsx)(n.NN,{colSpan:3,children:(0,c.jsx)("div",{className:"alert alert-primary w-100 my-2",children:(0,c.jsx)("span",{className:"",children:"No Lecture Sessions Are There for This Subject"})})})})})]})})]})})}):null]}):null,x&&(0,c.jsx)(i,{visible:p,setVisible:g,attendances:x,session_data:b}),!d&&(0,c.jsxs)("div",{role:"status",className:"p-4 border border-gray-200 rounded shadow animate-pulse md:p-6 dark:border-gray-700",children:[(0,c.jsx)("div",{className:"h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-32 mb-2.5"}),(0,c.jsx)("div",{className:"w-48 h-2 mb-10 bg-gray-200 rounded-full dark:bg-gray-700"}),(0,c.jsxs)("div",{className:"flex items-baseline mt-4",children:[(0,c.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-72 dark:bg-gray-300"}),(0,c.jsx)("div",{className:"w-full h-56 ms-6 bg-gray-200 rounded-t-lg dark:bg-gray-300"}),(0,c.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-72 ms-6 dark:bg-gray-300"}),(0,c.jsx)("div",{className:"w-full h-64 ms-6 bg-gray-200 rounded-t-lg dark:bg-gray-300"}),(0,c.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-80 ms-6 dark:bg-gray-300"}),(0,c.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-72 ms-6 dark:bg-gray-300"}),(0,c.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-80 ms-6 dark:bg-gray-300"}),(0,c.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-80 ms-6 dark:bg-gray-300"})]})]})]})},h=a.lazy((()=>t.e(338).then(t.bind(t,9338)))),m=a.lazy((()=>Promise.all([t.e(134),t.e(998)]).then(t.bind(t,5998)))),u=a.lazy((()=>Promise.resolve().then(t.bind(t,183)))),x=a.lazy((()=>Promise.all([t.e(426),t.e(841)]).then(t.bind(t,1841)))),j=a.lazy((()=>t.e(681).then(t.bind(t,1681)))),p=a.lazy((()=>Promise.all([t.e(426),t.e(551)]).then(t.bind(t,4551)))),g=a.lazy((()=>t.e(657).then(t.bind(t,6657)))),b=a.lazy((()=>t.e(746).then(t.bind(t,9746)))),v=a.lazy((()=>t.e(255).then(t.bind(t,3255)))),f=[{path:"/",exact:!0,name:"Home"},{path:"/dashboard",name:"Dashboard",element:h},{path:"/forms",name:"Forms",element:v,exact:!0},{path:"/forms/form-control",name:"Form Control",element:v},{path:"/forms/input-group",name:"Input Group",element:a.lazy((()=>t.e(85).then(t.bind(t,4085))))},{path:"/forms/validation",name:"Validation",element:a.lazy((()=>t.e(386).then(t.bind(t,8386))))},{path:"/manage-teachers",name:"Teacher",element:a.lazy((()=>t.e(962).then(t.bind(t,5962))))},{path:"/breadcrumb",name:"Breadcrumbnav",element:a.lazy((()=>t.e(979).then(t.bind(t,9979))))},{path:"/TeacherSidebar",name:"TeacherSidebar",element:a.lazy((()=>t.e(99).then(t.bind(t,8037))))},{path:"/logout",name:"Logout",element:b},{path:"/timetable",name:"Timetable",element:m},{path:"/subject",name:"Subject",element:u},{path:"/addstudent",name:"AddStudent",element:j},{path:"/teacher/dashboard",name:"Teacherview",element:x},{path:"/studentdashboard",name:"StudentDashboard",element:p},{path:"/teacher/session",name:"Sessionmanage",element:g},{path:"/teacher/lectures/history",name:"LectureHistory",element:d}];var y=t(7689),w=t(2958),N=t(2585);t(9160),t(3645);const k=()=>{const{state:e,dispatch:s}=(0,a.useContext)(N.y),{accessToken:t,refreshToken:r,batches:l,accessTokenActive:o,profileDetails:i}=e;(0,y.s0)();return(0,a.useEffect)((()=>{t&&i.obj.profile.role}),[]),(0,c.jsx)(n.KB,{lg:!0,children:(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)(n.LQ,{color:"primary"}),children:(0,c.jsxs)(y.Z5,{children:[f.map(((e,s)=>e.element&&(0,c.jsx)(y.AW,{path:e.path,exact:e.exact,name:e.name,element:(0,c.jsx)(e.element,{})},s))),"admin"===i.obj.profile.role?(0,c.jsx)(y.AW,{path:"/",element:(0,c.jsx)(y.Fg,{to:"dashboard",replace:!0})}):"teacher"===i.obj.profile.role?(0,c.jsx)(y.AW,{path:"/",element:(0,c.jsx)(y.Fg,{to:"teacher/dashboard",replace:!0})}):"student"===i.obj.profile.role?(0,c.jsx)(y.AW,{path:"/",element:(0,c.jsx)(y.Fg,{to:"studentdashboard",replace:!0})}):void 0]})})})},S=a.memo(k);var T=t(9434),C=t(4846),_=t(612);const Z=()=>{(0,y.s0)();const{state:e,dispatch:s}=(0,a.useContext)(N.y),{profileDetails:t}=e,[r,l]=(0,a.useState)("");(0,a.useEffect)((()=>{t&&l(t.obj.profile.email)}),[t]);return(0,c.jsx)(n.w5,{variant:"nav-item",children:(0,c.jsx)(n.SQ,{placement:"bottom-end",className:"py-0",caret:!1,children:(0,c.jsx)("div",{className:"text-medium-emphasis",children:r})})})},E=()=>{const{state:e,dispatch:s}=(0,a.useContext)(N.y),{profileDetails:t}=e,[r,l]=(0,a.useState)("");(0,a.useEffect)((()=>{t&&l(t.email)}),[t]);const o=(0,T.I0)(),i=(0,T.v9)((e=>e.sidebarShow));return(0,c.jsx)(n.PO,{position:"sticky",className:"mb-2",children:(0,c.jsxs)(n.KB,{fluid:!0,children:[(0,c.jsx)(n.X4,{className:"ps-1",onClick:()=>o({type:"set",sidebarShow:!i}),children:(0,c.jsx)(C.Z,{icon:_.N,size:"lg"})}),(0,c.jsx)(n.g3,{className:"ms-3",children:(0,c.jsx)(Z,{})})]})})};var A=t(3193),I=t(4358);t(2454);const L=t.p+"static/media/smartroll_logo.a3c3e21d0b4a56919e74.png";var F=t(443);const D=()=>{const{state:e,dispatch:s}=(0,a.useContext)(N.y),{accessToken:t,refreshToken:r,profileDetails:l}=e,o=(0,T.I0)(),i=(0,T.v9)((e=>e.sidebarUnfoldable)),d=(0,T.v9)((e=>e.sidebarShow));return(0,c.jsxs)(n.z3,{position:"fixed",palcement:"end",unfoldable:i,visible:d,onVisibleChange:e=>{o({type:"set",sidebarShow:e})},children:[(0,c.jsx)("img",{className:"p-3",src:L}),(0,c.jsx)(n.Xk,{children:(0,c.jsxs)(I.Z,{children:["admin"===l.obj.profile.role&&(0,c.jsx)(A.$,{items:F.Z.admin_role}),"teacher"===l.obj.profile.role&&(0,c.jsx)(A.$,{items:F.Z.teacher_role}),"student"===l.obj.profile.role&&(0,c.jsx)(A.$,{items:F.Z.student_role})]})})]})},z=a.memo(D);var O=t(9165),H=t(5443);const U=()=>{const{state:e,dispatch:s}=(0,a.useContext)(N.y),{accessToken:t,refreshToken:n}=e,[r,o]=(0,a.useState)(!1),[i,d]=(0,a.useState)(!0),[h,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(0),j=(0,y.s0)();"undefined"!==typeof window&&(window.setProgress=x);const p=async e=>{const t={"Content-Type":"application/json","ngrok-skip-browser-warning":!0,Authorization:"Bearer ".concat(e)};l.Z.get("".concat(w.t,"/check_token_authenticity/"),{headers:t}).then((t=>{if(!0===t.data.data){const t=(0,O.o)(e);s({type:"SET_PROFILE",payload:t}),m(!0)}})).catch((e=>{n?(async e=>{l.Z.post("".concat(w.t,"/auth/api/token/refresh/"),{refresh:e},{headers:{"ngrok-skip-browser-warning":!0}}).then((e=>{s({type:"ACCESS_TOKEN",payload:e.data.access}),s({type:"REFRESH_TOKEN",payload:e.data.refresh}),localStorage.setItem("accessToken",e.data.access),localStorage.setItem("refreshToken",e.data.refresh);const t=(0,O.o)(e.data.access);s({type:"SET_PROFILE",payload:t}),m(!0)})).catch((e=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),j("/login")}))})(n):j("/login")}))};return(0,a.useEffect)((()=>{(async()=>{l.Z.get("".concat(w.t,"/check_server_avaibility/"),{headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}).then((e=>{o(!0),t?p(t):j("/login")})).catch((e=>{j("/404")}))})()}),[]),t&&h?(0,c.jsxs)("div",{children:[(0,c.jsx)(H.Z,{color:"#1f6feb",progress:u,onLoaderFinished:()=>x(0)}),(0,c.jsx)(z,{}),(0,c.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,c.jsx)(E,{}),(0,c.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,c.jsx)(S,{})})]})]}):null}},183:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(2791),n=t(2585),r=t(5294),l=(t(2958),t(9160),t(3645)),o=t(2937),c=t(7689),i=t(9792),d=t(184);const h=()=>{const[e,s]=(0,a.useState)(null),[t,h]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[x,j]=(0,i.Z)(),[p,g]=(0,a.useState)(null),[b,v]=(0,a.useState)(!1),[f,y]=(0,a.useState)(""),[w,N]=(0,a.useState)(""),[k,S]=(0,a.useState)(""),[T,C]=(0,a.useState)(""),{state:_,dispatch:Z}=(0,a.useContext)(n.y),{accessToken:E,refreshToken:A}=_;(0,c.s0)();return(0,a.useEffect)((()=>{(async()=>{const e=r.Z.create;let s={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},t=await j(x,e,"/manage/get_terms","get",s);if(0==t.error){let e=t.response;u(e.data.data)}else alert(t.errorMessage.message)})(),(async()=>{const e=r.Z.create();let t={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},a=await j(x,e,"/manage/get_subject","get",t,null,null);if(0==a.error){let e=a.response;s(e.data.data)}})()}),[]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.rb,{children:(0,d.jsxs)(o.b7,{children:[m&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(o.xH,{className:"mb-3",children:[(0,d.jsx)(o.bn,{children:"select term"}),(0,d.jsx)(o.sl,{children:(0,d.jsxs)(o.LX,{"aria-label":"Default select example",onChange:e=>{console.log(e.target.value),(async e=>{r.Z.create();const s=await j(x,r.Z,"/manage/get_semesters","get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},null,{term_slug:e});if(0==s.error){const e=s.response;h(e.data.data)}})(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Select Term"}),m.map(((e,s)=>(0,d.jsxs)("option",{value:e.slug,children:["Term : ",e.start_year," - ",e.end_year]},s)))]})})]})}),t&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(o.xH,{className:"mb-3",children:[(0,d.jsx)(o.bn,{children:"Semester"}),(0,d.jsx)(o.sl,{children:(0,d.jsxs)(o.LX,{"aria-label":"Default select example",onChange:e=>{g(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Select Semester"}),t.map(((e,s)=>(0,d.jsxs)("option",{value:e.slug,children:["Semester - ",e.no]},s)))]})})]})})]})}),p?(0,d.jsx)(o.rb,{children:(0,d.jsx)(o.b7,{xs:12,children:(0,d.jsxs)(o.xH,{className:"mb-3",children:[(0,d.jsx)(o.bn,{children:(0,d.jsx)("strong",{children:"Subjects"})}),(0,d.jsx)(o.sl,{children:(0,d.jsxs)(o.lx,{className:"row g-3 needs-validation",noValidate:!0,validated:b,onSubmit:e=>{if(!1===e.currentTarget.checkValidity())return e.preventDefault(),e.stopPropagation(),void alert("Please Enter Valid Subject Information");v(!0);const t={code:w,subject_name:f,credit:k,semester_slug:p};e.preventDefault(),(async e=>{const t=r.Z.create();let a={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},n=await(0,l.J)(t,"/manage/add_subject/","post",a,e,null);if(0==n.error){let e=n.response;s((s=>[...s,e.data.data])),(0,l.w)("success","Subject Added successfully...!")}else alert(n.errorMessage.message)})(t)},children:[(0,d.jsxs)(o.b7,{md:12,children:[(0,d.jsx)(o.L8,{htmlFor:"validationCustom01",children:"Subject Name"}),(0,d.jsx)(o.jO,{type:"text",id:"validationCustom01",onChange:e=>y(e.target.value),required:!0}),(0,d.jsx)(o.CO,{valid:!0,children:"Looks good!"})]}),(0,d.jsxs)(o.b7,{md:6,children:[(0,d.jsx)(o.L8,{htmlFor:"validationCustom01",children:"Subject Code"}),(0,d.jsx)(o.jO,{type:"number",id:"validationCustom01",onChange:e=>N(e.target.value),required:!0}),(0,d.jsx)(o.CO,{valid:!0,children:"Looks good!"})]}),(0,d.jsxs)(o.b7,{md:6,children:[(0,d.jsx)(o.L8,{htmlFor:"validationCustom01",children:"Subject Credit"}),(0,d.jsx)(o.jO,{type:"number",id:"validationCustom01",onChange:e=>S(e.target.value),required:!0}),(0,d.jsx)(o.CO,{valid:!0,children:"Looks good!"})]}),(0,d.jsx)(o.b7,{xs:12,children:(0,d.jsx)("button",{className:"btn btn-outline-dark form-control",type:"submit",children:"Submit form"})})]})})]})})}):null,(0,d.jsx)(o.rb,{children:e?(0,d.jsx)(o.b7,{xs:!0,children:(0,d.jsxs)(o.xH,{className:"mb-4",children:[(0,d.jsx)(o.bn,{children:(0,d.jsx)("strong",{children:"Subject History"})}),(0,d.jsx)(o.sl,{children:(0,d.jsxs)(o.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,d.jsx)(o.V,{color:"light",children:(0,d.jsxs)(o.T6,{children:[(0,d.jsx)(o.is,{children:"Subject Name"}),(0,d.jsx)(o.is,{children:"Subject Code"}),(0,d.jsx)(o.is,{children:"Semester"})]})}),(0,d.jsx)(o.NR,{children:e.map(((e,s)=>(0,d.jsxs)(o.T6,{"v-for":"item in tableItems",children:[(0,d.jsx)(o.NN,{children:(0,d.jsx)("div",{children:e.subject_name.charAt(0).toUpperCase()+e.subject_name.slice(1)})}),(0,d.jsx)(o.NN,{children:(0,d.jsx)("div",{children:e.code})}),(0,d.jsx)(o.NN,{children:(0,d.jsx)("div",{children:e.semester.no})})]},s)))})]})})]})}):null})]})})}},2673:()=>{}}]);
//# sourceMappingURL=149.0229cdb7.chunk.js.map