"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[59],{6059:(e,l,s)=>{s.r(l),s.d(l,{ManageSurveys:()=>u,default:()=>m});var t=s(5043),a=s(3946),n=s(6213),r=s(9426),i=s(579);const o=e=>{let{visible:l,setVisible:s,setActiveSurveys:o}=e;const[c,d]=(0,r.A)(),[u,m]=(0,t.useState)(null),[x,h]=(0,t.useState)("__all__"),[v,g]=(0,t.useState)("__all__"),[f,p]=(0,t.useState)("__all__"),[b,_]=(0,t.useState)(2),[j,w]=(0,t.useState)({}),[y,N]=(0,t.useState)(""),[S,k]=(0,t.useState)([]),[C,M]=(0,t.useState)([]),[A,B]=(0,t.useState)([]),[E,L]=(0,t.useState)([]),T={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},z=n.A.create();(0,t.useEffect)((()=>{u?F(u):h("__all__")}),[u]),(0,t.useEffect)((()=>{"__all__"!==x?V(x):g("__all__")}),[x]),(0,t.useEffect)((()=>{"__all__"!==v?q(v):p("__all__")}),[v]);const F=async e=>{let l=await d(c,z,"/manage/get_semesters_from_branch/".concat(e),"get",T,null,null);if(!1===l.error){var s;let e=null===l||void 0===l?void 0:l.response,t=null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data;M(t)}},V=async e=>{let l=await d(c,z,"/manage/get_divisons_from_semester/".concat(e),"get",T,null,null);if(!1===l.error){var s;let e=null===l||void 0===l?void 0:l.response,t=null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data;B(t)}},q=async e=>{let l=await d(c,z,"/manage/get_batches_from_divison/".concat(e),"get",T,null,null);if(!1===l.error){var s;let e=null===l||void 0===l?void 0:l.response,t=null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data;L(t)}};return(0,t.useEffect)((()=>{(async()=>{let e=await d(c,z,"/manage/get_branches_of_teacher","get",T,null,null);if(!1===e.error){let l=e.response.data.data;k(l)}})()}),[]),(0,i.jsx)(a.FB,{placement:"end",visible:l,onHide:()=>s(!1),"data-coreui-backdrop":"static",className:"card w-50 p-4",children:(0,i.jsx)(a.Xu,{children:(0,i.jsxs)(a.E$,{className:"shadow-lg rounded-lg border border-gray-200",children:[(0,i.jsx)(a.V0,{className:"bg-[#c2bcf4] text-xl py-2 rounded-t-lg",children:"Add Survey"}),(0,i.jsx)(a.W6,{className:"p-6",children:(0,i.jsxs)("form",{className:"space-y-4",autoComplete:"off",onSubmit:async e=>{e.preventDefault();let l={survey_title:y,type:"mcq",branch_slug:u,semester_slug:x,division_slug:v,batch_slug:f,options:Object.values(j)},t=await d(c,z,"/manage/additional_features/generate_survey_for_a_lecture/","post",T,l,null);if(0==t.error){var a,n;let e=null===t||void 0===t||null===(a=t.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.data;o((l=>[...l,e])),s(!1)}else alert(t.errorMessage.message)},children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"form-label text-lg font-semibold",children:"Title of Survey"}),(0,i.jsx)("input",{type:"text",className:"form-control border-gray-300 shadow-sm focus:border-yellow-500 focus:ring focus:ring-yellow-500 focus:ring-opacity-50",required:!0,onChange:e=>{N(e.target.value)}})]}),(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("label",{className:"text-lg font-semibold",children:"Manage Options"}),(0,i.jsx)("button",{id:"decrement-btn",className:"flex justify-center items-center w-6 h-6 rounded-full text-white focus:outline-none bg-gray-400 hover:bg-gray-500",onClick:()=>{b>2&&_(b-1)},type:"button",children:(0,i.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,i.jsx)("span",{id:"counter",className:"text-2xl font-bold mx-4",children:b}),(0,i.jsx)("button",{id:"increment-btn",className:"flex justify-center items-center w-6 h-6 rounded-full text-white focus:outline-none bg-indigo-500 hover:bg-indigo-600",onClick:()=>{_(b+1)},type:"button",children:(0,i.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v12M6 12h12"})})})]}),(0,i.jsx)("div",{className:"mx-2",children:[...Array(b)].map(((e,l)=>(0,i.jsxs)("div",{className:"mb-3 focus:border-yellow-500",children:[(0,i.jsxs)("label",{className:"form-label",children:["Option ",l+1]}),(0,i.jsx)("input",{type:"text",className:"form-control focus:border-yellow-500",required:!0,onChange:e=>{w((s=>({...s,["option_".concat(l)]:e.target.value})))}})]},l)))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"form-label text-lg font-semibold",children:"Select Branch"}),(0,i.jsxs)(a.MT,{"aria-label":"Select Branch",onChange:e=>{""!==e.target.value&&m(e.target.value)},children:[(0,i.jsx)("option",{value:"",children:"Select Branch"}),S.map(((e,l)=>(0,i.jsx)("option",{value:e.slug,children:e.branch_name},l)))]})]}),u&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"form-label text-lg font-semibold",children:"Select Semester"}),(0,i.jsxs)(a.MT,{onChange:e=>{h(e.target.value)},children:[(0,i.jsx)("option",{value:"__all__",children:"Select All"}),C.map(((e,l)=>(0,i.jsx)("option",{value:e.slug,children:e.no},l)))]})]}),"__all__"!==x&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"form-label text-lg font-semibold",children:"Select Division"}),(0,i.jsxs)(a.MT,{onChange:e=>{g(e.target.value)},children:[(0,i.jsx)("option",{value:"__all__",children:"Select All"}),A.map(((e,l)=>(0,i.jsx)("option",{value:e.slug,children:e.division_name},l)))]})]}),"__all__"!==v&&(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"form-label text-lg font-semibold",children:"Select Batch"}),(0,i.jsxs)(a.MT,{onChange:e=>{p(e.target.value)},children:[(0,i.jsx)("option",{value:"__all__",children:"Select All"}),E.map(((e,l)=>(0,i.jsx)("option",{value:e.slug,children:e.batch_name},l)))]})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-dark text-black rounded-md px-4 py-2 form-control",children:"Submit"}),(0,i.jsx)("button",{type:"button",className:"btn btn-danger text-black rounded-md px-4 py-2 form-control",onClick:()=>{s(!1)},children:"Cancel"})]})})]})})})};const c=function(e){let{setVisible:l}=e;return(0,i.jsx)("div",{className:"fixed bottom-0 right-0 w-16 h-16 mr-12 mb-8 cursor-pointer",id:"box_btn",onClick:()=>{l(!0)},children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:60,height:60,fill:"currentColor",className:"bi bi-plus-circle-fill",viewBox:"0 0 16 16",children:(0,i.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"})})})};const d=function(e){let{item:l,active:s,endSurvey:t}=e;return(0,i.jsxs)(a.Bw,{className:"flex-row px-3 flex-wrap justify-content-center bg-slate-200 border border-black shadow-md",children:[(0,i.jsxs)("div",{className:"w-100 fw-bold text-center text-sm-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("small",{className:"mx-2 my-2 text-xl block",children:l.title}),(0,i.jsxs)("small",{className:"mx-2 my-2 text-xs flex items-center gap-2 text-gray-700",children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-check2-circle",viewBox:"0 0 16 16",children:[(0,i.jsx)("path",{d:"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 1 0 0 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 1 1 0-11 0"}),(0,i.jsx)("path",{d:"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"})]}),"Select One"]})]}),(0,i.jsx)("hr",{className:"w-100 my-2"})]}),(0,i.jsx)("div",{className:"w-100",children:l.options.map(((e,s)=>(0,i.jsxs)("div",{className:"my-2",children:[(0,i.jsx)("label",{htmlFor:"option-".concat(l.id,"-").concat(s),className:"text-blue-700 font-bold text-sm p-2",children:e.option}),(0,i.jsxs)("span",{className:"ml-2 text-gray-500/60 font-bold",children:["(",e.student_count," votes)"]})]},s)))}),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("hr",{className:"w-100 my-2"}),(0,i.jsx)("div",{className:"flex-initial py-3 w-full",children:(0,i.jsxs)("button",{className:"w-full justify-center flex items-center px-5 py-2.5 font-medium tracking-wide text-white capitalize bg-slate-800 rounded-md focus:outline-none focus:bg-gray-900 transition duration-300 transform active:scale-95 ease-in-out hover:bg-red-500",type:"submit",onClick:()=>{t(l.slug)},children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"26px",height:"26px",children:[(0,i.jsx)("path",{fill:"#f44336",d:"M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"}),(0,i.jsx)("path",{fill:"#fff",d:"M29.656,15.516l2.828,2.828l-14.14,14.14l-2.828-2.828L29.656,15.516z"}),(0,i.jsx)("path",{fill:"#fff",d:"M32.484,29.656l-2.828,2.828l-14.14-14.14l2.828-2.828L32.484,29.656z"})]}),(0,i.jsx)("span",{className:"pl-2",children:"End Survey"})]})})]})]})},u=()=>{const[e,l]=(0,t.useState)(!1),[s,a]=(0,t.useState)([]),[u,m]=(0,t.useState)([]),[x,h]=(0,t.useState)("active"),[v,g]=(0,r.A)(),f={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},p=n.A.create();(0,t.useEffect)((()=>{g(v,p,"/manage/additional_features/get_surveys_of_the_teacher","get",f,null,null).then((e=>{if(e.error)alert(e.errorMessage.message);else{var l,s;let t=null===e||void 0===e||null===(l=e.response)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data;a(t.filter((e=>1==e.active))),m(t.filter((e=>0==e.active)))}}))}),[]);const b=async e=>{let l={survey_slug:e};console.log(e),g(v,p,"/manage/additional_features/end_survey/","post",f,l,null).then((l=>{l.error?alert(l.errorMessage.message):a(s.filter((l=>(m((e=>[...e,l])),l.slug!=e))))}))};return(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("select",{className:"form-select","aria-label":"Default select example",required:!0,onChange:e=>{h("active"==x?"inactive":"active")},children:[(0,i.jsx)("option",{value:"active",children:"Active Surveys"}),(0,i.jsx)("option",{value:"inactive",children:"Inactive Surveys"})]})}),(0,i.jsx)("div",{children:"active"===x?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"flex flex-col gap-4 overflow-y-scroll",children:s.length>0?s.map(((e,l)=>(0,i.jsx)(d,{item:e,active:!0,endSurvey:b},l))):(0,i.jsx)("div",{className:"alert alert-warning w-full my-2 text-center",children:(0,i.jsx)("span",{children:"No Active Surveys"})})})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"flex flex-col gap-4 overflow-y-scroll",children:u.length>0?u.map(((e,l)=>(0,i.jsx)(d,{item:e,active:!1},l))):(0,i.jsx)("div",{className:"alert alert-warning w-75 my-2 text-center",children:(0,i.jsx)("span",{children:"No Inactive Surveys"})})})})}),(0,i.jsx)(c,{setVisible:l}),(0,i.jsx)(o,{visible:e,setVisible:l,setActiveSurveys:a})]})},m=u}}]);
//# sourceMappingURL=59.bf036a44.chunk.js.map