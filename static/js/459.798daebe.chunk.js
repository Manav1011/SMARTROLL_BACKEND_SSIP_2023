"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[459],{4459:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(5043),r=s(6213),l=s(9426),n=s(3946),c=s(579);const i=e=>{let{visible:t,setVisible:s,branches:i,setActiveEvents:o}=e;const[d,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[u,g]=(0,a.useState)([]),[b,p]=(0,l.A)(),f={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},j=r.A.create();return(0,c.jsx)(n.FB,{placement:"end",visible:t,onHide:()=>s(!1),"data-coreui-backdrop":"static",className:"card w-100 p-4",children:(0,c.jsx)(n.Xu,{children:(0,c.jsxs)(n.E$,{className:"shadow-lg rounded-lg border border-gray-200",children:[(0,c.jsx)(n.V0,{className:"bg-[#c2bcf4] text-xl py-2 rounded-t-lg",children:"Add Event"}),(0,c.jsx)(n.W6,{className:"p-6",children:(0,c.jsxs)("form",{className:"space-y-4",autoComplete:"off",onSubmit:async e=>{e.preventDefault(),p(b,j,"/manage/notifications/add_event/","post",f,{title:d,description:h,branches:u},null).then((e=>{if(e.error)alert(e.errorMessage.message);else{let t=e.response.data.data;o((e=>[t,...e])),s(!1)}}))},children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"form-label text-lg font-semibold",children:"Title Of Event"}),(0,c.jsx)("input",{type:"text",className:"form-control border-gray-300 shadow-sm focus:border-yellow-500 focus:ring focus:ring-yellow-500 focus:ring-opacity-50",required:!0,onChange:e=>{m(e.target.value)}})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"form-label text-lg font-semibold",children:"Description Of Event"}),(0,c.jsx)("textarea",{rows:4,type:"textarea",className:"form-control border-gray-300 shadow-sm focus:border-yellow-500 focus:ring focus:ring-yellow-500 focus:ring-opacity-50",required:!0,onChange:e=>{x(e.target.value)}})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"form-label text-lg font-semibold",children:"Select Branch"}),(0,c.jsx)(n.MT,{"aria-label":"Select Branch",multiple:!0,value:u,onChange:e=>{const t=Array.from(e.target.selectedOptions,(e=>e.value));g(t)},children:i.map(((e,t)=>(0,c.jsx)("option",{value:e.slug,children:e.branch_name},t)))})]}),(0,c.jsx)("button",{type:"submit",className:"btn btn-dark text-black rounded-md px-4 py-2 form-control",children:"Submit"}),(0,c.jsx)("button",{type:"button",className:"btn btn-danger text-black rounded-md px-4 py-2 form-control",onClick:()=>{s(!1)},children:"Cancel"})]})})]})})})};const o=function(){const[e,t]=(0,a.useState)(!1),[s,o]=(0,a.useState)([]),[d,m]=(0,a.useState)([]),[h,x]=(0,a.useState)("active"),[u,g]=(0,l.A)(),[b,p]=(0,a.useState)([]),f={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},j=r.A.create();return(0,a.useEffect)((()=>{(async()=>{g(u,j,"/manage/notifications/get_events","get",f,null,null).then((e=>{if(e.error)alert(e.errorMessage.message);else{let t=e.response.data.data;o(t.filter((e=>1==e.status))),m(t.filter((e=>0==e.status)))}}))})(),(async()=>{g(u,j,"/manage/get_active_branches_for_superadmin","get",f,null,null).then((e=>{var t,s;e.error?alert(e.errorMessage.message):p(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.data)}))})()}),[]),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsxs)("select",{className:"form-select","aria-label":"Default select example",onChange:e=>{x(e.target.value)},children:[(0,c.jsx)("option",{value:"active",children:"Active Events"}),(0,c.jsx)("option",{value:"past",children:"Past Events"})]})}),(0,c.jsx)("div",{className:"mt-4",children:"past"==h?d.length>0?d.map(((e,t)=>(0,c.jsxs)(n.E$,{className:"mb-4",children:[(0,c.jsx)(n.V0,{children:(0,c.jsx)("h5",{className:"mb-2 text-2xl font-semibold tracking-tight text-dark",children:e.title})}),(0,c.jsx)(n.W6,{children:(0,c.jsx)("p",{className:"mb-3 font-normal text-gray-500 dark:text-gray-400",children:e.description})}),(0,c.jsx)(n.XW,{children:(0,c.jsxs)("p",{className:"mb-3 font-normal text-gray-800 dark:text-gray-800",children:[(0,c.jsx)("p",{className:"mb-1 font-bold text-gray-800 dark:text-gray-800",children:"Branches"}),e.branches.map(((e,t)=>e.branch_name)).join(", ")]})})]},t))):(0,c.jsx)("div",{className:"d-flex w-100 justify-content-center",children:(0,c.jsx)("div",{className:"alert alert-warning w-full my-2 text-center",children:(0,c.jsx)("span",{className:"",children:"No Past Events"})})}):s.length>0?s.map(((e,t)=>(0,c.jsxs)(n.E$,{className:"mb-4",children:[(0,c.jsx)(n.V0,{children:(0,c.jsx)("h5",{className:"mb-2 text-2xl font-semibold tracking-tight text-dark",children:e.title})}),(0,c.jsx)(n.W6,{children:(0,c.jsx)("p",{className:"mb-3 font-normal text-gray-500 dark:text-gray-400",children:e.description})}),(0,c.jsx)(n.XW,{children:(0,c.jsxs)("p",{className:"mb-3 font-normal text-gray-800 dark:text-gray-800",children:[(0,c.jsx)("p",{className:"mb-1 font-bold text-gray-800 dark:text-gray-800",children:"Branches"}),e.branches.map(((e,t)=>e.branch_name)).join(", ")]})}),(0,c.jsx)("button",{className:"w-full btn btn-outline-danger rounded-none mt-2",onClick:()=>{(async e=>{g(u,j,"/manage/notifications/end_event","post",f,{event_slug:e},null).then((t=>{t.error?alert(t.errorMessage.message):(alert(t.response.data.message),o(s.filter((t=>(m((e=>[t,...e])),t.slug!=e)))))}))})(e.slug)},children:"Event Event"})]},t))):(0,c.jsx)("div",{className:"d-flex w-100 justify-content-center",children:(0,c.jsx)("div",{className:"alert alert-warning w-full my-2 text-center",children:(0,c.jsx)("span",{className:"",children:"No Active Events"})})})}),(0,c.jsx)("div",{className:"fixed bottom-0 right-0 w-16 h-16 mr-12 mb-8 cursor-pointer",id:"box_btn",onClick:()=>{t(!0)},children:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:60,height:60,fill:"currentColor",className:"bi bi-plus-circle-fill",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"})})}),b.length>0&&(0,c.jsx)(i,{visible:e,setVisible:t,branches:b,setActiveEvents:o})]})}}}]);
//# sourceMappingURL=459.798daebe.chunk.js.map