"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[398],{5017:(e,s,l)=>{l.r(s),l.d(s,{default:()=>m});var a=l(5043),r=l(3946),n=l(9426),t=l(6213),i=(l(1343),l(2678),l(6178)),c=l.n(i),d=l(335),o=l(579);const m=()=>{const[e,s]=(0,n.A)(),[l,i]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),[x,j]=(0,a.useState)(null),[u,p]=(0,a.useState)(null),[g,v]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),[_,y]=(0,a.useState)(null),[N,C]=(0,a.useState)(null),S=e=>{const s=m.filter((s=>s.session.some((s=>s.day===e))));s.length>0?j(s):j(null)},k=async l=>{const a=t.A.create(),r=await s(e,a,"/manage/session/get_session_data_for_export/".concat(l),"get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},null,null);if(!1===r.error){const e=r.response;p(e.data.data.marked_attendances),y(e.data.data),b(!0)}else alert(r.errorMessage.message)};return(0,a.useEffect)((()=>{(async()=>{const l=t.A.create();let a=await s(e,l,"/manage/get_teacher","get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0});if(0==a.error){let e=a.response;C(e.data.data)}else alert(a.errorMessage.message)})()}),[]),(0,o.jsxs)(o.Fragment,{children:[N?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("label",{className:"form-label",children:"Select A Teacher"}),(0,o.jsxs)("select",{className:"form-select","aria-label":"Default select example",required:!0,onChange:l=>{(async l=>{const a=t.A.create(),r=await s(e,a,"/manage/get_subjects_of_teacher_by_admin","get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},null,{teacher_slug:l});if(!1===r.error){const e=r.response;i(e.data.data)}else i(null),p(null),h(null),alert(r.errorMessage.message)})(l.target.value),v(l.target.value)},children:[(0,o.jsx)("option",{value:"",children:"...."}),N.length>0&&N.map(((e,s)=>(0,o.jsx)("option",{value:e.slug,children:e.profile.name},s)))]})]}),l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("label",{className:"form-label",children:"Select A Subject"}),(0,o.jsxs)("select",{className:"form-select","aria-label":"Default select example",required:!0,onChange:l=>{(async l=>{const a=t.A.create(),r=await s(e,a,"/manage/get_lecture_sessions_for_teacher_by_admin","get",{"Content-Type":"application/json","ngrok-skip-browser-warning":!0},null,{subject_slug:l,teacher_slug:g});if(!1===r.error){const e=r.response;h(e.data.data)}else alert(r.errorMessage.message)})(l.target.value)},children:[(0,o.jsx)("option",{value:"",children:"...."}),l&&l.map(((e,s)=>(0,o.jsx)("option",{value:e.slug,children:e.subject_name},s)))]})]}),x?(0,o.jsx)(r.sK,{children:(0,o.jsx)(r.UF,{xs:!0,children:(0,o.jsxs)(r.E$,{className:"mb-4",children:[(0,o.jsx)(r.V0,{children:(0,o.jsxs)("div",{className:"d-flex flex-wrap justify-between",children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:"Subject Attendance History"})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"d-flex",children:[(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"date",id:"validationCustom01",required:!0,onChange:e=>{S(e.target.value)}})}),(0,o.jsx)("div",{className:"mx-2"})]})})]})}),(0,o.jsx)(r.W6,{children:(0,o.jsxs)(r._v,{align:"middle",className:"mb-0 border text-center",hover:!0,responsive:!0,children:[(0,o.jsx)(r.wV,{color:"light",children:(0,o.jsxs)(r.YI,{children:[(0,o.jsx)(r.$s,{children:"classroom"}),(0,o.jsx)(r.$s,{children:"Lecture Type"}),(0,o.jsx)(r.$s,{children:"Date"}),(0,o.jsx)(r.$s,{children:"Time"})]})}),(0,o.jsx)(r.jS,{children:x.map(((e,s)=>e.session.map(((s,l)=>(0,o.jsxs)(r.YI,{"v-for":"item in tableItems",onClick:e=>k(s.session_id),children:[(0,o.jsx)(r.cC,{style:{fontSize:"0.8rem"},children:(0,o.jsx)("div",{children:e.classroom})}),(0,o.jsx)(r.cC,{style:{fontSize:"0.8rem"},children:(0,o.jsx)("div",{children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),(0,o.jsx)(r.cC,{style:{fontSize:"0.6rem"},children:(0,o.jsx)("div",{children:s.day})}),(0,o.jsxs)(r.cC,{style:{fontSize:"0.5rem"},children:[(0,o.jsxs)("span",{className:"d-block",children:[c()(e.start_time.slice(0,5),"HH:mm").format("h:mm A")," "]}),(0,o.jsx)("span",{className:"d-block",children:"To"}),(0,o.jsx)("span",{className:"d-block",children:c()(e.end_time.slice(0,5),"HH:mm").format("h:mm A")})]})]},l)))))})]})})]})})}):m?(0,o.jsx)(r.sK,{children:(0,o.jsx)(r.UF,{xs:!0,children:(0,o.jsxs)(r.E$,{className:"mb-4",children:[(0,o.jsx)(r.V0,{children:(0,o.jsxs)("div",{className:"d-flex flex-wrap justify-between",children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:"Subject Attendance History"})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"d-flex",children:[(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"date",id:"validationCustom01",required:!0,onChange:e=>{S(e.target.value)}})}),(0,o.jsx)("div",{className:"mx-2"})]})})]})}),(0,o.jsx)(r.W6,{children:(0,o.jsx)(r._v,{align:"middle",className:"mb-0 border text-center",hover:!0,responsive:!0,children:(0,o.jsxs)(r._v,{align:"middle",className:"mb-0 border text-center",hover:!0,responsive:!0,children:[(0,o.jsx)(r.wV,{color:"light",children:(0,o.jsxs)(r.YI,{children:[(0,o.jsx)(r.$s,{children:"Class"}),(0,o.jsx)(r.$s,{children:"Type"}),(0,o.jsx)(r.$s,{children:"Date"}),(0,o.jsx)(r.$s,{children:"Time"})]})}),(0,o.jsx)(r.jS,{children:m.length>0?m.map(((e,s)=>e.session.map(((s,l)=>(0,o.jsxs)(r.YI,{"v-for":"item in tableItems",onClick:e=>k(s.session_id),children:[(0,o.jsx)(r.cC,{style:{fontSize:"0.8rem"},children:(0,o.jsx)("div",{children:e.classroom})}),(0,o.jsx)(r.cC,{style:{fontSize:"0.8rem"},children:(0,o.jsx)("div",{children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),(0,o.jsx)(r.cC,{style:{fontSize:"0.6rem"},children:(0,o.jsx)("div",{children:s.day})}),(0,o.jsxs)(r.cC,{style:{fontSize:"0.5rem"},children:[(0,o.jsxs)("span",{className:"d-block",children:[c()(e.start_time.slice(0,5),"HH:mm").format("h:mm A")," "]}),(0,o.jsx)("span",{className:"d-block",children:"To"}),(0,o.jsx)("span",{className:"d-block",children:c()(e.end_time.slice(0,5),"HH:mm").format("h:mm A")})]})]},l))))):(0,o.jsx)(r.YI,{"v-for":"item in tableItems",children:(0,o.jsx)(r.cC,{colSpan:4,children:(0,o.jsx)("div",{className:"alert alert-primary w-100 my-2",children:(0,o.jsx)("span",{className:"",children:"No Lecture Sessions Are There for This Subject"})})})})})]})})})]})})}):null]}):null]}):null,u&&(0,o.jsx)(d.A,{visible:f,setVisible:b,attendances:u,session_data:_}),!m&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"d-flex justify-content-center",children:(0,o.jsx)("img",{style:{maxWidth:"70%",height:"auto"},src:"/svgs/lecturehistory.svg"})})})]})}}}]);
//# sourceMappingURL=398.f3499afc.chunk.js.map