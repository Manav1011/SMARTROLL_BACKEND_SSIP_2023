{"version":3,"file":"static/js/6657.b618b35c.chunk.js","mappings":"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","sources":["views/teacher/Sessionmanage.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useContext } from 'react'\nimport { DownloadTableExcel } from 'react-export-table-to-excel';\n\nimport {\n  COffcanvas,\n  COffcanvasBody,\n  CAlert,\n  CRow,\n  CCol,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CTable,\n  CTableBody,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CTableRow,\n} from '@coreui/react'\nimport '../../css/tailwind.css'\nimport useAPI from 'src/global_function/useApi'\nimport axios from 'axios'\nimport { websocket } from 'src/base_url'\nimport { Store } from '../forms/validation/store'\nimport { useNavigate } from 'react-router-dom'\n\nconst Sessionmanage = () => {\n  const url = new URL(window.location.href.replace('/#', ''))\n  const [lectureSlug] = useState(url.searchParams.get('slug'))\n  const [session_data, setSessionData] = useState(null)\n  const [attendances, setAttendances] = useState(null)\n  const { state, dispatch: ctxDispatch } = useContext(Store)\n  const { accessToken } = state\n  const tableRef = useRef(null);\n  const [sessionEnded,setSessionEnded] = useState(false)\n  const ws = useRef(null)\n  const navigate =  useNavigate()\n  const [StoredTokens, CallAPI] = useAPI()\n\n  useEffect(() => {\n    if (lectureSlug) {\n      const headers = {\n        'Content-Type': 'application/json',\n        'ngrok-skip-browser-warning': true,\n      }\n      const axiosInstance = axios.create()\n      CallAPI(\n        StoredTokens,\n        axiosInstance,\n        '/manage/session/create_lecture_session/',\n        'post',\n        headers,\n        { lecture_slug: lectureSlug },\n        null,\n      ).then((responseobj) => {\n        if (responseobj.error === false) {\n          const response = responseobj.response\n          if (!ws.current) {\n            ws.current = new WebSocket(\n              `${websocket}/ws/attendance_session/${response.data.data.session_id}/?${accessToken}`,\n            )\n          }\n          setAttendances(response.data.data.marked_attendances)\n          setSessionData(response.data.data)\n        } else {\n          alert(responseobj.errorMessage.message)\n          navigate(\"/teacher/dashboard\")\n        }\n      })\n    }\n  }, [lectureSlug])\n\n  useEffect(() => {\n    if (ws.current) {\n      ws.current.onopen = () => {\n        console.log('WebSocket connection established')\n      }\n\n      ws.current.onclose = () => {\n        console.log('WebSocket connection closed')\n      }\n\n      ws.current.onmessage = (event) => {\n        let data = JSON.parse(event.data)\n        console.log(data)\n        if(data.message){\n          if (data.message.action == 'attendance_marked') {\n            setAttendances((prevArray) => [...prevArray, data.message.data])\n          }else if (data.message.action == 'session_ended') {\n            setAttendances(data.message.data.marked_attendances)\n              alert('Session has ended')\n              setSessionEnded(true)\n              // navigate(\"/teacherdashboard\")\n          }else if (data.message.action == 'session_already_ended') {\n              // setSessionEnded(true)\n              alert('Session has already been ended')\n          }\n        }\n        // Handle received message\n      }\n\n      ws.current.onerror = (error) => {\n        console.error('WebSocket error:', error)\n      }\n    }\n  }, [ws.current])\n\n  const stopAttendance = () => {\n    if(ws.current){\n        ws.current.send(JSON.stringify({\n            action:'end_session'\n        }))\n    }\n  }\n\n  return (\n    <>\n      {session_data ? (\n        <>\n        \n          <CRow>\n            <CCol>\n              <CCard className=\"card\">\n                <CCardHeader>\n                  <div className=\"d-flex justify-content-sm-between justify-content-center flex-wrap\">\n                    <div className=\"mx-3 mb-2\">\n                      <strong>Lecture Details</strong>\n                    </div>\n                    <div className=\"mx-3\">\n                      <strong>{new Date(session_data.created_at).toLocaleString()}</strong>\n                    </div>\n                  </div>\n                </CCardHeader>\n                <CCardBody>\n                  <div className=\"d-flex flex-wrap w-100\">\n                    <div className=\"col-12\">\n                      <div className=\"w-100 d-flex flex-wrap flex-1 justify-center\">\n                        <div className=\"text-center col-12 col-sm-3 col-md-3 col-lg-3\">                          \n                          <p style={{ margin: '0px', padding: '0px' }}>\n                            {session_data.lecture.start_time} | {session_data.lecture.end_time}\n                          </p>\n                        </div>\n                        <div className=\"text-center col-12 col-sm-3 col-md-3 col-lg-3\">                          \n                          <p style={{ margin: '0px', padding: '0px' }}>\n                            {session_data.lecture.subject.subject_name}\n                          </p>\n                        </div>\n                        <div className=\"text-center col-12 col-sm-3 col-md-3 col-lg-3\">\n                          <p style={{ margin: '0px', padding: '0px' }}>\n                            {session_data.lecture.type}\n                          </p>\n                        </div>\n                        <div className=\"text-center col-12 col-sm-3 col-md-3 col-lg-3\">\n                          <p style={{ margin: '0px', padding: '0px' }}>\n                            {session_data.lecture.classroom.class_name}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CCardBody>\n              </CCard>\n            </CCol>\n          </CRow>\n          <CRow className=\"mt-3\">\n            <CCol xs>\n              <CCard className=\"mb-4\">\n                <CCardHeader className=\"\">                  \n                 {!sessionEnded ? ( <div className='my-2 w-100 btn btn btn-outline-danger' onClick={() => {stopAttendance()}}>\n                    <span className='me-3 d-inline'>End Session</span>\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"16\"\n                      height=\"16\"\n                      fill=\"currentColor\"\n                      className=\"d-inline bi bi-stop-circle-fill\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5z\" />\n                    </svg>\n                  </div>) : (<DownloadTableExcel\n                        filename={`${session_data.lecture.subject.subject_name} - ${new Date(session_data.lecture.session.day).toLocaleString()}`}\n                        sheet=\"users\"\n                        currentTableRef={tableRef.current}\n                    >\n\n                      <button className='my-2 w-100 btn btn btn-outline-primary'> Export excel </button>\n\n                    </DownloadTableExcel>)}\n\n                </CCardHeader>\n                <CCardBody>\n                  <CRow className=\"w-100 flex-col\">\n                    <CCol className=\"col-12\">\n                    <div className='table-responsive'>\n                      <table align=\"middle\" className=\"table align-middle table-hover text-center mb-0 border hover responsive\" ref={tableRef}>\n                        <CTableHead color=\"light\">\n                        <CTableRow aria-colspan={5}>\n                            <CTableHeaderCell colSpan={5}>L.D COLLEGE OF ENGINEERING</CTableHeaderCell>\n                          </CTableRow>\n                          <CTableRow aria-colspan={5}>\n                            <CTableHeaderCell colSpan={5}>Subject: {session_data.lecture.subject.subject_name} | DATE: {session_data.lecture.session.day}</CTableHeaderCell>\n                          </CTableRow>\n                          <CTableRow>\n                            {/* <CTableHeaderCell>SR. NO</CTableHeaderCell> */}\n                            <CTableHeaderCell>Enrollment No</CTableHeaderCell>\n                            <CTableHeaderCell>Student Name</CTableHeaderCell>\n                            <CTableHeaderCell>IP Addr</CTableHeaderCell>\n                            <CTableHeaderCell>Batch</CTableHeaderCell>\n                            <CTableHeaderCell>Status</CTableHeaderCell>\n                          </CTableRow>\n                        </CTableHead>\n                        <CTableBody>\n                          {attendances &&\n                            attendances.map((item, index) => (\n                              <CTableRow v-for=\"alert alert-primary item in tableItems\" key={index}>\n                                {/* <CTableDataCell>\n                                        <div>{item.student.sr_no}</div>   \n                                </CTableDataCell> */}\n                                <CTableDataCell>\n                                  <div>{item.student.enrollment ? item.student.enrollment: \"-\"}</div>\n                                </CTableDataCell>\n                                <CTableDataCell>\n                                  <div>{item.student.profile.name ? item.student.profile.name: '-'}</div>\n                                </CTableDataCell>\n                                <CTableDataCell>\n                                  <div>{item.marking_ip ? item.marking_ip : '-'}</div>\n                                </CTableDataCell>\n                                <CTableDataCell>\n                                <div>\n                                  {item.batches\n                                    ? item.batches.map((batch, index) => (\n                                        <span key={index}>{batch.batch_name.toUpperCase()}</span>\n                                      ))\n                                    : '-'}\n                                </div>\n\n                                </CTableDataCell>\n                                {item.is_present ? (<CTableDataCell>\n                                  <div className=\"text-success d-flex align-items-center justify-content-center\">\n                                    <svg\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                      width=\"16\"\n                                      height=\"16\"\n                                      fill=\"currentColor\"\n                                      className=\"mx-auto bi bi-patch-check\"\n                                      viewBox=\"0 0 16 16\"\n                                    >\n                                      <path\n                                        fillRule=\"evenodd\"\n                                        d=\"M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0\"\n                                      />\n                                      <path d=\"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z\" />\n                                    </svg>\n                                    <p style={{visibility:'hidden'}}>P</p>\n                                  </div>\n                                </CTableDataCell>): (<CTableDataCell>\n                                  <div className=\"text-danger d-flex align-items-center justify-content-center\">\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-x-octagon\" viewBox=\"0 0 16 16\">\n                                    <path d=\"M4.54.146A.5.5 0 0 1 4.893 0h6.214a.5.5 0 0 1 .353.146l4.394 4.394a.5.5 0 0 1 .146.353v6.214a.5.5 0 0 1-.146.353l-4.394 4.394a.5.5 0 0 1-.353.146H4.893a.5.5 0 0 1-.353-.146L.146 11.46A.5.5 0 0 1 0 11.107V4.893a.5.5 0 0 1 .146-.353zM5.1 1 1 5.1v5.8L5.1 15h5.8l4.1-4.1V5.1L10.9 1z\"/>\n                                    <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708\"/>\n                                  </svg>\n                                    <p style={{visibility:'hidden'}}>F</p>\n                                  </div>\n                                </CTableDataCell>)}\n                              </CTableRow>\n                            ))}\n                        </CTableBody>\n                      </table>\n                      </div>\n                    </CCol>\n                  </CRow>\n                </CCardBody>\n              </CCard>\n            </CCol>\n          </CRow>\n        </>\n      ) : (\n    <>                \n        <div role=\"status\" className=\"p-4 border border-gray-200 rounded shadow animate-pulse md:p-6 dark:border-gray-700\">\n            <div className=\"h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-32 mb-2.5\"></div>\n            <div className=\"w-48 h-2 mb-10 bg-gray-200 rounded-full dark:bg-gray-700\"></div>\n            <div className=\"flex items-baseline mt-4\">\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-72 dark:bg-gray-300\"></div>\n                <div className=\"w-full h-56 ms-6 bg-gray-200 rounded-t-lg dark:bg-gray-300\"></div>\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-72 ms-6 dark:bg-gray-300\"></div>\n                <div className=\"w-full h-64 ms-6 bg-gray-200 rounded-t-lg dark:bg-gray-300\"></div>\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-80 ms-6 dark:bg-gray-300\"></div>\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-72 ms-6 dark:bg-gray-300\"></div>\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-80 ms-6 dark:bg-gray-300\"></div>\n            </div>\n            <span className=\"sr-only\">Loading...</span>\n        </div>\n        <div role=\"status\" className=\"p-4 border border-gray-200 rounded shadow animate-pulse md:p-6 dark:border-gray-700\">\n            <div className=\"h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-32 mb-2.5\"></div>\n            <div className=\"w-48 h-2 mb-10 bg-gray-200 rounded-full dark:bg-gray-700\"></div>\n            <div className=\"flex items-baseline mt-4\">\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-72 dark:bg-gray-300\"></div>\n                <div className=\"w-full h-56 ms-6 bg-gray-200 rounded-t-lg dark:bg-gray-300\"></div>\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-72 ms-6 dark:bg-gray-300\"></div>\n                <div className=\"w-full h-64 ms-6 bg-gray-200 rounded-t-lg dark:bg-gray-300\"></div>\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-80 ms-6 dark:bg-gray-300\"></div>\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-72 ms-6 dark:bg-gray-300\"></div>\n                <div className=\"w-full bg-gray-200 rounded-t-lg h-80 ms-6 dark:bg-gray-300\"></div>\n            </div>\n            <span className=\"sr-only\">Loading...</span>\n        </div>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default Sessionmanage\n"],"names":["Sessionmanage","url","URL","window","location","href","replace","lectureSlug","useState","searchParams","get","session_data","setSessionData","attendances","setAttendances","state","dispatch","ctxDispatch","useContext","Store","accessToken","tableRef","useRef","sessionEnded","setSessionEnded","ws","navigate","useNavigate","StoredTokens","CallAPI","useAPI","useEffect","headers","axiosInstance","axios","create","lecture_slug","then","responseobj","error","response","current","WebSocket","concat","websocket","data","session_id","marked_attendances","alert","errorMessage","message","onopen","console","log","onclose","onmessage","event","JSON","parse","action","prevArray","onerror","_jsx","_Fragment","children","_jsxs","CRow","CCol","CCard","className","CCardHeader","Date","created_at","toLocaleString","CCardBody","style","margin","padding","lecture","start_time","end_time","subject","subject_name","type","classroom","class_name","xs","DownloadTableExcel","filename","session","day","sheet","currentTableRef","onClick","send","stringify","xmlns","width","height","fill","viewBox","d","align","ref","CTableHead","color","CTableRow","CTableHeaderCell","colSpan","CTableBody","map","item","index","CTableDataCell","student","enrollment","profile","name","marking_ip","batches","batch","batch_name","toUpperCase","is_present","fillRule","visibility","role"],"sourceRoot":""}